---
title: Настройка страницы Поиск (Майкрософт)
ms.author: jeffkizn
author: jypal
manager: jeffkizn
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Добавление вертикали поиска и настройка результатов поиска
ms.openlocfilehash: 6b6f0593a668e9c2c5c7fc5a62f7b5dd4a43a8bb
ms.sourcegitcommit: ea6905626de67090141039565282e4e0c53b43ac
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/07/2021
ms.locfileid: "53314022"
---
# <a name="customize-the-search-results-page"></a><span data-ttu-id="07e32-103">Настройка страницы результатов поиска</span><span class="sxs-lookup"><span data-stu-id="07e32-103">Customize the search results page</span></span>

<span data-ttu-id="07e32-104">Вы можете создать вертикали поиска и типы результатов для настройки результатов поиска, которые пользователи видят при поиске в Microsoft [SharePoint,](https://sharepoint.com/) [Microsoft Office](https://office.com)и Поиск (Майкрософт) в [Bing](https://bing.com).</span><span class="sxs-lookup"><span data-stu-id="07e32-104">You can create search verticals and result types to customize the search results that users see when they search in Microsoft [SharePoint](https://sharepoint.com/), [Microsoft Office](https://office.com), and Microsoft Search in [Bing](https://bing.com).</span></span> <span data-ttu-id="07e32-105">Вертикали упрощают поиск пользователями сведений, которые они могут видеть.</span><span class="sxs-lookup"><span data-stu-id="07e32-105">Verticals make it easier for users to find the information that they have permission to see.</span></span> <span data-ttu-id="07e32-106">Например, можно создать вертикаль поиска для анализа маркетинговых данных из сторонних программ для пользователей в отделе маркетинга.</span><span class="sxs-lookup"><span data-stu-id="07e32-106">For example, you could create a search vertical for marketing analysis data from third-party software for your users in the marketing department.</span></span> <span data-ttu-id="07e32-107">Вы также можете определить типы результатов и настроить макет для этих данных.</span><span class="sxs-lookup"><span data-stu-id="07e32-107">You can also define result types and customize the layout for this data.</span></span>  

<span data-ttu-id="07e32-108">На этих уровнях можно создавать вертикали и типы результатов:</span><span class="sxs-lookup"><span data-stu-id="07e32-108">You can create verticals and result types at these levels:</span></span>

- <span data-ttu-id="07e32-109">**Уровень** организации — при добавлении вертикали на уровне организации он отображается [](https://sharepoint.com/) на странице результатов [](https://office.com)поиска при поиске пользователей со своей SharePoint страницы, Office или [на Bing](https://bing.com).</span><span class="sxs-lookup"><span data-stu-id="07e32-109">**Organization level** – When you add a vertical at the organization level, it appears on the search results page when users search from their [SharePoint](https://sharepoint.com/) start page, on [Office](https://office.com), or on [Bing](https://bing.com).</span></span>
- <span data-ttu-id="07e32-110">**Уровень сайта** . Например, может потребоваться включить сотрудников службы обслуживания клиентов для поиска инцидентов строгости *1* непосредственно с веб-сайта SharePoint отдела.</span><span class="sxs-lookup"><span data-stu-id="07e32-110">**Site level** – For example, you might want to enable your customer service employees to search for *Severity 1* incidents directly from their department’s SharePoint site.</span></span>

## <a name="search-verticals-explained"></a><span data-ttu-id="07e32-111">Объяснили вертикали поиска</span><span class="sxs-lookup"><span data-stu-id="07e32-111">Search verticals explained</span></span>

<span data-ttu-id="07e32-112">В верхней части Поиск (Майкрософт) результатов есть строка вкладок.</span><span class="sxs-lookup"><span data-stu-id="07e32-112">At the top of the Microsoft Search results page, there's a row of tabs.</span></span> <span data-ttu-id="07e32-113">Это вертикали поиска.</span><span class="sxs-lookup"><span data-stu-id="07e32-113">These are the search verticals.</span></span> <span data-ttu-id="07e32-114">Вертикаль поиска показывает только результаты определенного типа или определенного контента.</span><span class="sxs-lookup"><span data-stu-id="07e32-114">A search vertical only shows results of a certain type or from certain content.</span></span> <span data-ttu-id="07e32-115">Примерами являются **Файлы** или **Новости.**</span><span class="sxs-lookup"><span data-stu-id="07e32-115">Examples are **Files** or **News**.</span></span> <span data-ttu-id="07e32-116">По умолчанию Поиск (Майкрософт) показывает вертикали **All**, **People**, **Files,** **Sites** и **News**.</span><span class="sxs-lookup"><span data-stu-id="07e32-116">By default, Microsoft Search shows the verticals **All**, **People**, **Files**, **Sites**, and **News**.</span></span>  

<span data-ttu-id="07e32-117">Можно добавить вертикали поиска, которые имеют отношение к организации.</span><span class="sxs-lookup"><span data-stu-id="07e32-117">You can add search verticals that are relevant to your organization.</span></span> <span data-ttu-id="07e32-118">Они будут отображаться на странице Поиск (Майкрософт) результатов [в SharePoint,](https://sharepoint.com/) [Office](https://Office.com)и [Bing](https://bing.com).</span><span class="sxs-lookup"><span data-stu-id="07e32-118">These will appear on the Microsoft Search results page in [SharePoint](https://sharepoint.com/), [Office](https://Office.com), and [Bing](https://bing.com).</span></span> <span data-ttu-id="07e32-119">Например, можно создать вертикаль для контента, связанного с маркетингом, а другой для продаж, на основе типа сведений, необходимых каждой группе.</span><span class="sxs-lookup"><span data-stu-id="07e32-119">For example, you could create a vertical for marketing-related content and another for sales, based on the type of information that each group needs.</span></span> <span data-ttu-id="07e32-120">Можно добавить вертикали, чтобы показывать результаты только из контента, индексного через соединители.</span><span class="sxs-lookup"><span data-stu-id="07e32-120">You can add verticals to show results only from content indexed via connectors.</span></span>  

### <a name="multiple-connections-in-a-vertical"></a><span data-ttu-id="07e32-121">Несколько подключений в вертикали</span><span class="sxs-lookup"><span data-stu-id="07e32-121">Multiple connections in a vertical</span></span>

<span data-ttu-id="07e32-122">Вертикаль поиска теперь может поверхность результатов из нескольких источников соединителя.</span><span class="sxs-lookup"><span data-stu-id="07e32-122">A search vertical can now surface results from multiple connector sources.</span></span> <span data-ttu-id="07e32-123">Это обеспечивает большую гибкость при разработке страницы результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="07e32-123">This provides greater flexibility in designing your search result page.</span></span> <span data-ttu-id="07e32-124">Существующий административный опыт вертикальной установки позволяет выбрать несколько подключений в шаге "Источник контента".</span><span class="sxs-lookup"><span data-stu-id="07e32-124">The existing administrative experience of vertical setup allows you to select multiple connections in the "Content Source" step.</span></span>
<span data-ttu-id="07e32-125">Если вы точно назначит как можно больше семантических меток, этот опыт будет улучшен.</span><span class="sxs-lookup"><span data-stu-id="07e32-125">If you accurately appoint as many semantic labels as possible, this experience will be enhanced.</span></span> <span data-ttu-id="07e32-126">Можно добавить семантические метки при определении схемы и прогоне.</span><span class="sxs-lookup"><span data-stu-id="07e32-126">You can add semantic labels upon schema definition and ingestion.</span></span>

<span data-ttu-id="07e32-127">[Дополнительные](configure-connector.md#step-5-assign-property-labels) сведения о создании и управлении семантическими метами.</span><span class="sxs-lookup"><span data-stu-id="07e32-127">[Here](configure-connector.md#step-5-assign-property-labels) is additional information on how to create and manage semantic labels.</span></span>

> [!NOTE]
> <span data-ttu-id="07e32-128">Несколько подключений в вертикали в настоящее время находятся в предварительном просмотре.</span><span class="sxs-lookup"><span data-stu-id="07e32-128">Multiple connections in a vertical is currently in preview.</span></span> <span data-ttu-id="07e32-129">Дополнительные сведения о предварительной версии см. в [дополнительных сведениях о функции предварительного просмотра соединители.](connectors-overview.md#what-are-the-preview-features)</span><span class="sxs-lookup"><span data-stu-id="07e32-129">For more information about preview, see [Connectors preview features](connectors-overview.md#what-are-the-preview-features).</span></span>

### <a name="things-you-should-know"></a><span data-ttu-id="07e32-130">Все, что вы должны знать</span><span class="sxs-lookup"><span data-stu-id="07e32-130">Things you should know</span></span>

1. <span data-ttu-id="07e32-131">Подключение может быть добавлено в качестве источника контента только в рамках одной вертикали.</span><span class="sxs-lookup"><span data-stu-id="07e32-131">A connection can be added as a content source only under one vertical.</span></span> <span data-ttu-id="07e32-132">Повторное подключение к нескольким вертикалям не допускается.</span><span class="sxs-lookup"><span data-stu-id="07e32-132">Reusing connections under multiple verticals is not allowed.</span></span>
2. <span data-ttu-id="07e32-133">Если необходимо настроить запрос для вертикали поиска, в которой добавлено несколько источников подключения, для создания такого запроса необходимо использовать общие исходные свойства.</span><span class="sxs-lookup"><span data-stu-id="07e32-133">If you need to set up a query for a search vertical where multiple connection sources have been added, common source properties should be used to create a such a query.</span></span>

## <a name="things-to-consider"></a><span data-ttu-id="07e32-134">Важные факторы</span><span class="sxs-lookup"><span data-stu-id="07e32-134">Things to consider</span></span>

<span data-ttu-id="07e32-135">Перед началом убедитесь, что соединитектор проиндексировали.</span><span class="sxs-lookup"><span data-stu-id="07e32-135">Before you start, make sure that the connector has been indexed.</span></span> <span data-ttu-id="07e32-136">Это может занять до 48 часов в зависимости от размера файла.</span><span class="sxs-lookup"><span data-stu-id="07e32-136">This can take up to 48 hours, depending on the file size.</span></span>

<span data-ttu-id="07e32-137">Вы не можете создать вертикаль для контента, расположенного [в SharePoint.](https://sharepoint.com/)</span><span class="sxs-lookup"><span data-stu-id="07e32-137">You can’t create a vertical for content that resides in [SharePoint](https://sharepoint.com/).</span></span>

<span data-ttu-id="07e32-138">Существует три основных шага, чтобы добавить вертикаль:</span><span class="sxs-lookup"><span data-stu-id="07e32-138">There are three basic steps to add a vertical:</span></span>

1. <span data-ttu-id="07e32-139">Создайте вертикаль.</span><span class="sxs-lookup"><span data-stu-id="07e32-139">Create the vertical.</span></span> <span data-ttu-id="07e32-140">На этом шаге определяется имя, источник контента вертикали и область поиска контента.</span><span class="sxs-lookup"><span data-stu-id="07e32-140">In this step, you define the vertical’s name, content source, and scope of the content to search.</span></span>
2. <span data-ttu-id="07e32-141">Определите, как будут выглядеть результаты для этой вертикали.</span><span class="sxs-lookup"><span data-stu-id="07e32-141">Define what the results for this vertical will look like.</span></span>  
3. <span data-ttu-id="07e32-142">Включить вертикальную (отображаемую) со страницы вертикального списка.</span><span class="sxs-lookup"><span data-stu-id="07e32-142">Enable the vertical (to be displayed) from the vertical list page.</span></span>

## <a name="step-1-create-the-search-vertical"></a><span data-ttu-id="07e32-143">ШАГ 1. Создание вертикали поиска</span><span class="sxs-lookup"><span data-stu-id="07e32-143">STEP 1: Create the search vertical</span></span>

<span data-ttu-id="07e32-144">После запуска мастера необходимо определить имя, источник контента и область поиска по вертикали.</span><span class="sxs-lookup"><span data-stu-id="07e32-144">After you start the wizard, you're guided through the steps to define the vertical's name, content source, and scope of the content to search.</span></span> <span data-ttu-id="07e32-145">Вертикаль создается в состоянии отключения.</span><span class="sxs-lookup"><span data-stu-id="07e32-145">The vertical is created in a disabled state.</span></span> <span data-ttu-id="07e32-146">Вы включаете его позже.</span><span class="sxs-lookup"><span data-stu-id="07e32-146">You'll enable it later.</span></span>

<span data-ttu-id="07e32-147">Чтобы сузить область, можно использовать ограниченный набор языка запросов ключевых слов [(KQL).](/sharepoint/dev/general-development/keyword-query-language-kql-syntax-reference)</span><span class="sxs-lookup"><span data-stu-id="07e32-147">You can use a limited set of [Keyword Query Language (KQL)](/sharepoint/dev/general-development/keyword-query-language-kql-syntax-reference) to narrow the scope.</span></span> <span data-ttu-id="07e32-148">На этой странице перечислены доступные свойства.</span><span class="sxs-lookup"><span data-stu-id="07e32-148">This page lists the properties that are available.</span></span> <span data-ttu-id="07e32-149">Для создания KQL рекомендуется использовать ключевые слова и ограничения свойств с операторами boolean.</span><span class="sxs-lookup"><span data-stu-id="07e32-149">We recommend that you use free-text keywords and property restrictions with boolean operators for creating the KQL.</span></span>
<span data-ttu-id="07e32-150">KQL также поддерживает использование [](#profile-query-variables) переменных запросов профилей для точной настройки результатов в вертикальной области.</span><span class="sxs-lookup"><span data-stu-id="07e32-150">KQL also supports the use of [profile query variables](#profile-query-variables) to fine-tune results under the vertical.</span></span>

### <a name="create-a-vertical-at-the-organization-level"></a><span data-ttu-id="07e32-151">Создание вертикали на уровне организации</span><span class="sxs-lookup"><span data-stu-id="07e32-151">Create a vertical at the organization level</span></span>

<span data-ttu-id="07e32-152">Чтобы создать вертикаль на Поиск (Майкрософт) в [SharePoint,](https://sharepoint.com/) [Office](https://office.com)или Bing [выполните](https://bing.com)следующие действия:</span><span class="sxs-lookup"><span data-stu-id="07e32-152">To create the vertical on Microsoft Search in [SharePoint](https://sharepoint.com/) home, [Office](https://office.com), or [Bing](https://bing.com), follow these steps:</span></span>

1. <span data-ttu-id="07e32-153">В [Центр администрирования Microsoft 365](https://admin.microsoft.com)перейдите к [**вертикалям**](https://admin.microsoft.com/Adminportal/Home#/MicrosoftSearch/verticals).</span><span class="sxs-lookup"><span data-stu-id="07e32-153">In the [Microsoft 365 admin center](https://admin.microsoft.com), go to [**Verticals**](https://admin.microsoft.com/Adminportal/Home#/MicrosoftSearch/verticals).</span></span>
2. <span data-ttu-id="07e32-154">Выберите **Добавить,** чтобы начать работу.</span><span class="sxs-lookup"><span data-stu-id="07e32-154">Select **Add** to get started.</span></span>  

### <a name="create-a-vertical-at-the-site-level"></a><span data-ttu-id="07e32-155">Создание вертикали на уровне сайта</span><span class="sxs-lookup"><span data-stu-id="07e32-155">Create a vertical at the site level</span></span>

1. <span data-ttu-id="07e32-156">На [сайте SharePoint,](https://sharepoint.com/) где нужна вертикаль, перейдите **в Параметры.**</span><span class="sxs-lookup"><span data-stu-id="07e32-156">On the [SharePoint](https://sharepoint.com/) site where you want the vertical, go to **Settings**.</span></span>
2. <span data-ttu-id="07e32-157">Выберите **сведения о сайте,** а затем **просмотреть все параметры сайта.**</span><span class="sxs-lookup"><span data-stu-id="07e32-157">Select **Site information** and then **View all site settings**.</span></span>
3. <span data-ttu-id="07e32-158">Посмотрите раздел **Поиск (Майкрософт),** а затем выберите **Configure Поиск (Майкрософт) для этой коллекции сайтов.**</span><span class="sxs-lookup"><span data-stu-id="07e32-158">Look for the **Microsoft Search** section, and then select **Configure Microsoft Search for this site collection**.</span></span>
4. <span data-ttu-id="07e32-159">В области навигации перейдите к **пользовательскому опыту** и выберите вкладку **Verticals.**</span><span class="sxs-lookup"><span data-stu-id="07e32-159">In the navigation pane, go to **Custom experience**, and then select the **Verticals** tab.</span></span>
5. <span data-ttu-id="07e32-160">Чтобы добавить вертикаль, выберите **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="07e32-160">To add a vertical, select **Add**.</span></span>
  <span data-ttu-id="07e32-161">Или, чтобы изменить вертикаль, выберите ее в списке.</span><span class="sxs-lookup"><span data-stu-id="07e32-161">Or, to edit a vertical, select it in the list.</span></span>

<span data-ttu-id="07e32-162">Помните, что вертикали создаются в состоянии отключения.</span><span class="sxs-lookup"><span data-stu-id="07e32-162">Remember, verticals are created in a disabled state.</span></span> <span data-ttu-id="07e32-163">Они должны быть включены, прежде чем пользователи смогут их увидеть.</span><span class="sxs-lookup"><span data-stu-id="07e32-163">They must be enabled before users can see them.</span></span>

## <a name="step-2-create-the-result-types"></a><span data-ttu-id="07e32-164">ШАГ 2. Создание типов результатов</span><span class="sxs-lookup"><span data-stu-id="07e32-164">STEP 2: Create the result types</span></span>

<span data-ttu-id="07e32-165">Вы можете определить, как отображаются результаты в вертикали, путем разработки макета с использованием типов результатов.</span><span class="sxs-lookup"><span data-stu-id="07e32-165">You can define how results are displayed in the vertical by designing the layout using result types.</span></span> <span data-ttu-id="07e32-166">Макет результатов позволяет показывать важные сведения непосредственно в результатах поиска, поэтому пользователям не нужно выбирать каждый результат, чтобы узнать, нашли ли они то, что ищут.</span><span class="sxs-lookup"><span data-stu-id="07e32-166">The result layout lets you show important information directly in the search results, so users don't have to select each result to see if they found what they're looking for.</span></span>

### <a name="default-search-result-layout"></a><span data-ttu-id="07e32-167">Макет результатов поиска по умолчанию</span><span class="sxs-lookup"><span data-stu-id="07e32-167">Default search result layout</span></span>

<span data-ttu-id="07e32-168">Макет результатов поиска по умолчанию будет  показан для  контента Connector, если метки и свойство контента были правильно соединялись с исходными свойствами во время настройки соединителю.</span><span class="sxs-lookup"><span data-stu-id="07e32-168">A default search result layout will be shown for Connector content if **labels** and **content** property have been mapped correctly to the source properties at the time of configuring the connector.</span></span> <span data-ttu-id="07e32-169">Название **метки** является наиболее важным меткой.</span><span class="sxs-lookup"><span data-stu-id="07e32-169">The label **title** is the most important label.</span></span> <span data-ttu-id="07e32-170">Настоятельно рекомендуется **иметь свойство,** назначенное этой метке, для использования макета результатов поиска по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="07e32-170">It is **strongly recommended** that you have a property assigned to this label to use default search result layout.</span></span>

### <a name="create-your-own-result-type"></a><span data-ttu-id="07e32-171">Создание собственного типа результатов</span><span class="sxs-lookup"><span data-stu-id="07e32-171">Create your own result type</span></span>

<span data-ttu-id="07e32-172">Вы можете создать собственный макет результатов поиска и переопредить макет результатов поиска по умолчанию, создав **тип результатов.**</span><span class="sxs-lookup"><span data-stu-id="07e32-172">You can decide to create your own search result layout and override the default search result layout by creating a **result type**.</span></span> <span data-ttu-id="07e32-173">Тип результата поиска  это правило, благодаря которому результаты поиска разных типов отображаются различными способами.</span><span class="sxs-lookup"><span data-stu-id="07e32-173">A search result type is a rule that causes distinct kinds of search results to be displayed in different ways.</span></span> <span data-ttu-id="07e32-174">Оно состоит из следующих компонентов.</span><span class="sxs-lookup"><span data-stu-id="07e32-174">It consists of the following:</span></span>

- <span data-ttu-id="07e32-175">**Одно или несколько условий** для сравнения каждого результата поиска, например источника контента результата поиска.</span><span class="sxs-lookup"><span data-stu-id="07e32-175">**One or more conditions** to compare each search result against, such as the content source of the search result.</span></span>  
- <span data-ttu-id="07e32-176">Макет **результатов** для использования для результатов поиска, которые соответствуют условиям.</span><span class="sxs-lookup"><span data-stu-id="07e32-176">A **result layout** to use for search results that meet the conditions.</span></span> <span data-ttu-id="07e32-177">Полученный макет управляет тем, как отображаются все результаты, которые соответствуют условиям, и ведут себя на странице результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="07e32-177">The resulting layout controls the way that all results that meet the conditions appear and behave on a search results page.</span></span>

<span data-ttu-id="07e32-178">**Если для отображения макета результатов поиска по умолчанию не сделано соответствующее сопоставление, необходимо создать по крайней мере один тип результатов для отображения результатов в вертикальной области.**</span><span class="sxs-lookup"><span data-stu-id="07e32-178">**If appropriate mapping is not done to show default search result layout, You must create at least one result type for results to display on the vertical.**</span></span> <span data-ttu-id="07e32-179">Можно создать несколько типов результатов для каждой вертикали, что позволяет использовать различные макеты для различных типов результатов.</span><span class="sxs-lookup"><span data-stu-id="07e32-179">You can create multiple result types for each vertical, which allows you to use different layouts for different type of results.</span></span> <span data-ttu-id="07e32-180">Например, можно настроить *инциденты строгости 1,* чтобы иметь более заметные цвета и шрифт большего размера по сравнению с инцидентами *строгости 3.*</span><span class="sxs-lookup"><span data-stu-id="07e32-180">For example, you can customize *Severity 1* incidents to have more prominent colors and a larger font compared to *Severity 3* incidents.</span></span>

<span data-ttu-id="07e32-181">После запуска мастера вы будете руководствоваться действиями, чтобы определить имя, источник контента и условия для типа результата.</span><span class="sxs-lookup"><span data-stu-id="07e32-181">After you start the wizard, you're guided through the steps to define the name, content source, and conditions for the result type.</span></span> <span data-ttu-id="07e32-182">Вы можете определить приоритет типа результатов из представления списка.</span><span class="sxs-lookup"><span data-stu-id="07e32-182">You can define the priority of the result type from the list view.</span></span>
  
### <a name="create-a-result-type-at-the-organization-level"></a><span data-ttu-id="07e32-183">Создание типа результатов на уровне организации</span><span class="sxs-lookup"><span data-stu-id="07e32-183">Create a result type at the organization level</span></span>

1. <span data-ttu-id="07e32-184">В [Центр администрирования Microsoft 365](https://admin.microsoft.com)перейдите к [**типам Result.**](https://admin.microsoft.com/Adminportal/Home#/MicrosoftSearch/resulttypes)</span><span class="sxs-lookup"><span data-stu-id="07e32-184">In the [Microsoft 365 admin center](https://admin.microsoft.com), go to [**Result types**](https://admin.microsoft.com/Adminportal/Home#/MicrosoftSearch/resulttypes).</span></span>
2. <span data-ttu-id="07e32-185">Чтобы добавить тип **Результат,** выберите **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="07e32-185">To add a **Result type**, select **Add**.</span></span> <span data-ttu-id="07e32-186">Чтобы изменить тип результатов, выберите тип результата в соответствующем списке.</span><span class="sxs-lookup"><span data-stu-id="07e32-186">To edit a result type, select the result type in the relevant list.</span></span>

### <a name="create-a-results-type-at-the-site-level"></a><span data-ttu-id="07e32-187">Создание типа результатов на уровне сайта</span><span class="sxs-lookup"><span data-stu-id="07e32-187">Create a results type at the site level</span></span>

1. <span data-ttu-id="07e32-188">На [сайте SharePoint,](https://sharepoint.com/) на котором необходимо создать тип результата, перейдите **в Параметры.**</span><span class="sxs-lookup"><span data-stu-id="07e32-188">On the [SharePoint](https://sharepoint.com/) site where you want to create the result type, go to **Settings**.</span></span>
2. <span data-ttu-id="07e32-189">Выберите **сведения о сайте,** а затем **просмотреть все параметры сайта.**</span><span class="sxs-lookup"><span data-stu-id="07e32-189">Select **Site information** and then **View all site settings**.</span></span>
3. <span data-ttu-id="07e32-190">Посмотрите раздел Поиск (Майкрософт), а затем выберите **Configure Поиск (Майкрософт) для этой коллекции сайтов.**</span><span class="sxs-lookup"><span data-stu-id="07e32-190">Look for the Microsoft Search section, and then select **Configure Microsoft Search for this site collection**.</span></span>
4. <span data-ttu-id="07e32-191">В области навигации перейдите к **пользовательскому опыту** и выберите вкладку **тип результатов.**</span><span class="sxs-lookup"><span data-stu-id="07e32-191">In the navigation pane, go to **Custom experience**, and select **Result type** tab.</span></span>
5. <span data-ttu-id="07e32-192">Чтобы добавить тип результата, выберите **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="07e32-192">To add a result type, select **Add**.</span></span>  <span data-ttu-id="07e32-193">Или, чтобы изменить тип результатов, выберите тип результата в списке.</span><span class="sxs-lookup"><span data-stu-id="07e32-193">Or, to edit a result type, select the result type in the list.</span></span>

## <a name="step-3-view-the-vertical-after-its-enabled"></a><span data-ttu-id="07e32-194">ШАГ 3. Просмотр вертикали после включения</span><span class="sxs-lookup"><span data-stu-id="07e32-194">STEP 3: View the vertical after it's enabled</span></span>

<span data-ttu-id="07e32-195">После в включить вертикаль, это займет несколько часов, прежде чем вы сможете просмотреть его.</span><span class="sxs-lookup"><span data-stu-id="07e32-195">After you enable the vertical, it will take a few hours before you can view it.</span></span> <span data-ttu-id="07e32-196">Если вы не хотите ждать после включения, вы можете применить **cacheClear=true** к URL-адресу в SharePoint и [Office,](https://office.com) чтобы немедленно просмотреть вертикаль. [](https://sharepoint.com/)</span><span class="sxs-lookup"><span data-stu-id="07e32-196">If you don't want to wait after enabling it, you can append **cacheClear=true** to the URL in [SharePoint](https://sharepoint.com/) and [Office](https://office.com) to view the vertical immediately.</span></span> <span data-ttu-id="07e32-197">Для Bing приложение&**features=uncachedVerticals** в [URL-адрес](https://bing.com)вертикальной работы для немедленного просмотра вертикали.</span><span class="sxs-lookup"><span data-stu-id="07e32-197">For [Bing](https://bing.com), append **&features=uncachedVerticals** to the Work vertical URL to view the verticals immediately.</span></span>

> [!NOTE]
> <span data-ttu-id="07e32-198">Добавленные вертикали не [](https://sharepoint.com/) будут видны на SharePoint [и Office](https://office.com) при просмотре из мобильных веб-браузеров.</span><span class="sxs-lookup"><span data-stu-id="07e32-198">Added verticals will not be visible on [SharePoint](https://sharepoint.com/) and [Office](https://office.com) when viewed from mobile web browsers.</span></span>

## <a name="profile-query-variables"></a><span data-ttu-id="07e32-199">Переменные запроса профилей</span><span class="sxs-lookup"><span data-stu-id="07e32-199">Profile query variables</span></span>

<span data-ttu-id="07e32-200">Переменные запроса используются в разделе запроса KQL вертикали для предоставления динамических данных в качестве входных данных для запроса вертикали.</span><span class="sxs-lookup"><span data-stu-id="07e32-200">Query variables are used in the KQL query section of a vertical to provide dynamic data as an input to the query of a vertical.</span></span> <span data-ttu-id="07e32-201">Вы можете использовать переменные запроса профилей, чтобы сделать результаты поиска контекстными для подписанного пользователя.</span><span class="sxs-lookup"><span data-stu-id="07e32-201">You can use profile query variables to make the search results contextual to the signed-in user.</span></span> <span data-ttu-id="07e32-202">Переменные запроса профилей извлекли значения из профиля подписанного [пользователя.](/graph/api/resources/profile?view=graph-rest-beta)</span><span class="sxs-lookup"><span data-stu-id="07e32-202">Profile query variables fetch values from the signed-in user’s [profile](/graph/api/resources/profile?view=graph-rest-beta).</span></span>

<span data-ttu-id="07e32-203">Например, если вы хотите создать вертикаль "Билеты", в которой пользователь с входом может искать назначенные им билеты поддержки, можно указать следующий запрос в разделе "Запрос" во время создания вертикали на странице администрирования.</span><span class="sxs-lookup"><span data-stu-id="07e32-203">For example, if you want to create a “Tickets” vertical where a signed-in user can search for support tickets assigned to them, you can specify the following query under the "Query" section during the vertical creation in the administration page.</span></span>  

<span data-ttu-id="07e32-204">**AssignedTo:{Profile.accounts.userPrincipalName}**</span><span class="sxs-lookup"><span data-stu-id="07e32-204">**AssignedTo:{Profile.accounts.userPrincipalName}**</span></span>

<span data-ttu-id="07e32-205">Это позволит сузить результаты поиска, чтобы показать только те элементы, в которых назначаемая является пользователем, который выполняет поиск.</span><span class="sxs-lookup"><span data-stu-id="07e32-205">This will narrow down the search results to show only those items where the assignee is the user performing the search.</span></span>

<span data-ttu-id="07e32-206">[Ресурс Profile](https://graph.microsoft.com/graph/api/resources/profile?view=graph-rest-beta) предоставляет свойства в качестве коллекций.</span><span class="sxs-lookup"><span data-stu-id="07e32-206">[Profile resource](https://graph.microsoft.com/graph/api/resources/profile?view=graph-rest-beta) exposes properties as collections.</span></span> <span data-ttu-id="07e32-207">Например, сведения, относящиеся к адресам электронной почты, высвечив их через коллекцию электронной почты, позиции в качестве коллекции позиций и так далее.</span><span class="sxs-lookup"><span data-stu-id="07e32-207">For example, information related to email addresses is exposed through email collection, work positions as positions collection, and so on.</span></span> <span data-ttu-id="07e32-208">Все свойства, доступные в профиле пользователя, которые имеют AAD как исходный тип, выставляются в качестве переменных Запроса.</span><span class="sxs-lookup"><span data-stu-id="07e32-208">All properties available in the user profile, which have AAD as the source type, are exposed as Query variables.</span></span>

<span data-ttu-id="07e32-209">Рассмотрим пользователя, который имеет 3 адреса электронной почты, доступные в коллекции электронной почты, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="07e32-209">Consider a user who has 3 email addresses available in the email collection, as shown below.</span></span>

```json
"emails": [{ 

        "address": "Megan.Bowen@contoso.com",
        "id": "xyz", 
        "source": { 
            "CreatedBy": "xyz", 
            "CreatedOn": "2222", 
            "Type": "official" 
        },
        "type": "main" 
    }, { 
        "address": "meganb@hotmail.com",
        "id": "abc", 
        "source": { 
            "CreatedBy": "abc",
            "CreatedOn": "3333", 
            "Type": "non-official",
        },
        "type": "work"
    }, { 
        "address": "meganb@outlook.com",
        "id": "pqr", 
        "source": { 
            "CreatedBy": "pqr", 
            "CreatedOn": "4444", 
            "Type": "personal" 
        },
        "type": "personal" 
    } 
] 
```

- <span data-ttu-id="07e32-210">Запрос **MyProperty: {Profile.emails.address}** будет решен в MyProperty: "Megan.Bowen@contoso.com".</span><span class="sxs-lookup"><span data-stu-id="07e32-210">The query **MyProperty: {Profile.emails.address}** will resolve to MyProperty: “Megan.Bowen@contoso.com”.</span></span>  

- <span data-ttu-id="07e32-211">Чтобы устранить все значения атрибута адреса, необходимо использовать синтаксис расширения с несколькими значениями.</span><span class="sxs-lookup"><span data-stu-id="07e32-211">If you wish to resolve all the values of the address attribute, you have to use the multi-value expansion syntax.</span></span> <span data-ttu-id="07e32-212">Запрос **{| MyProperty:{Profile.emails.address}}** разрешит ((MyProperty:"Megan.Bowen@contoso.com") OR (MyProperty: "meganb@hotmail.com") OR (MyProperty:"meganb@outlook.com"))</span><span class="sxs-lookup"><span data-stu-id="07e32-212">The query **{|MyProperty:{Profile.emails.address}}** will resolve to ((MyProperty:"Megan.Bowen@contoso.com") OR (MyProperty: "meganb@hotmail.com") OR (MyProperty:"meganb@outlook.com"))</span></span>  

<span data-ttu-id="07e32-213">Оператор "|" должен использоваться для решения многомерных переменных.</span><span class="sxs-lookup"><span data-stu-id="07e32-213">The “|” operator should be used for resolving multi-value variables.</span></span> <span data-ttu-id="07e32-214">Дополнительные примеры расширения профиля см. в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="07e32-214">For more examples on profile expansion refer to the table below.</span></span>

| #         | <span data-ttu-id="07e32-215">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="07e32-215">Syntax</span></span> |  <span data-ttu-id="07e32-216">Возвращено значение</span><span class="sxs-lookup"><span data-stu-id="07e32-216">Value returned</span></span>  |
| --------- | ------ | --- |
| <span data-ttu-id="07e32-217">1</span><span class="sxs-lookup"><span data-stu-id="07e32-217">1</span></span>    | <span data-ttu-id="07e32-218">MyProperty:{Profile.emails.address}</span><span class="sxs-lookup"><span data-stu-id="07e32-218">MyProperty:{Profile.emails.address}</span></span>  |   <span data-ttu-id="07e32-219">"Megan.Bowen@contoso.com"</span><span class="sxs-lookup"><span data-stu-id="07e32-219">"Megan.Bowen@contoso.com"</span></span>  |
| <span data-ttu-id="07e32-220">2</span><span class="sxs-lookup"><span data-stu-id="07e32-220">2</span></span> | <span data-ttu-id="07e32-221">MyProperty:{Profile.emails}</span><span class="sxs-lookup"><span data-stu-id="07e32-221">MyProperty:{Profile.emails}</span></span>   |    <span data-ttu-id="07e32-222">{Profile.emails} Это не решится, так как сообщения электронной почты являются объектом.</span><span class="sxs-lookup"><span data-stu-id="07e32-222">{Profile.emails} This will not resolve because emails are an object.</span></span>|
| <span data-ttu-id="07e32-223">3</span><span class="sxs-lookup"><span data-stu-id="07e32-223">3</span></span>    | <span data-ttu-id="07e32-224">{? MyProperty:{Profile.emails}}</span><span class="sxs-lookup"><span data-stu-id="07e32-224">{?MyProperty:{Profile.emails}}</span></span>  |  <span data-ttu-id="07e32-225">Это не решится, так как сообщения электронной почты являются объектом.</span><span class="sxs-lookup"><span data-stu-id="07e32-225">This will not resolve because emails is an object.</span></span> <span data-ttu-id="07e32-226">The "?"</span><span class="sxs-lookup"><span data-stu-id="07e32-226">The “?”</span></span> <span data-ttu-id="07e32-227">оператор игнорирует переменные запроса, которые не решаются.</span><span class="sxs-lookup"><span data-stu-id="07e32-227">operator ignores query variables that do not resolve.</span></span> <span data-ttu-id="07e32-228">Эта переменная будет удалена при дальнейшей стеке запросов.</span><span class="sxs-lookup"><span data-stu-id="07e32-228">This variable will be removed when passed further down the query stack.</span></span>   |
| <span data-ttu-id="07e32-229">4 </span><span class="sxs-lookup"><span data-stu-id="07e32-229">4</span></span> | <span data-ttu-id="07e32-230">{&#124;MyProperty: {Profile.emails.source.Type}}</span><span class="sxs-lookup"><span data-stu-id="07e32-230">{&#124;MyProperty: {Profile.emails.source.Type}}</span></span>    |  <span data-ttu-id="07e32-231">((MyProperty:"official") OR (MyProperty:"non-official") OR (MyProperty:"personal"))</span><span class="sxs-lookup"><span data-stu-id="07e32-231">((MyProperty:"official") OR (MyProperty:"non-official") OR (MyProperty:"personal"))</span></span>    |

> [!NOTE]
>
> - <span data-ttu-id="07e32-232">Переменные запроса профилей поддерживаются только для настраиваемой вертикали с помощью [соединителя](connectors-overview.md) в качестве источника контента.</span><span class="sxs-lookup"><span data-stu-id="07e32-232">Profile query variables are only supported for custom verticals using a [connector](connectors-overview.md) as a content source.</span></span>
> - <span data-ttu-id="07e32-233">Переменные запроса профилей определяются в разделе "Запрос" процесса [вертикальной настройка.](customize-search-page.md#step-1-create-the-search-vertical)</span><span class="sxs-lookup"><span data-stu-id="07e32-233">Profile query variables are defined on the “Query” section of the [vertical set up process](customize-search-page.md#step-1-create-the-search-vertical).</span></span>
> - <span data-ttu-id="07e32-234">Переменные запроса профилей в настоящее время находятся в предварительном просмотре.</span><span class="sxs-lookup"><span data-stu-id="07e32-234">Profile query variables is currently in preview.</span></span> <span data-ttu-id="07e32-235">Дополнительные сведения о предварительной версии см. в [дополнительных сведениях о функции предварительного просмотра соединители.](connectors-overview.md#what-are-the-preview-features)</span><span class="sxs-lookup"><span data-stu-id="07e32-235">For more information about preview, see [Connectors preview features](connectors-overview.md#what-are-the-preview-features).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="07e32-236">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="07e32-236">Troubleshooting</span></span>

<span data-ttu-id="07e32-237">Вот список распространенных проблем, с которыми вы можете столкнуться, и действия по их устранению.</span><span class="sxs-lookup"><span data-stu-id="07e32-237">Here's a list of common issues you might encounter and actions to fix them.</span></span>

|<span data-ttu-id="07e32-238">Ошибка</span><span class="sxs-lookup"><span data-stu-id="07e32-238">Error</span></span>  |<span data-ttu-id="07e32-239">Действие</span><span class="sxs-lookup"><span data-stu-id="07e32-239">Action</span></span>  |
|---------|---------|
| <span data-ttu-id="07e32-240">Я вижу сообщение об ошибке "Что-то пошло не так" на вертикали.</span><span class="sxs-lookup"><span data-stu-id="07e32-240">I see a "Something went wrong" error message on the vertical.</span></span> | <span data-ttu-id="07e32-241">Для завершения установки необходимы как вертикальные типы, так и типы результатов.</span><span class="sxs-lookup"><span data-stu-id="07e32-241">Both the vertical and result types are needed to complete the setup.</span></span> <span data-ttu-id="07e32-242">Убедитесь, что вы создали для одного и того же источника контента.</span><span class="sxs-lookup"><span data-stu-id="07e32-242">Make sure you have created both for the same content source.</span></span> |
| <span data-ttu-id="07e32-243">Я не вижу макет результатов, хотя создал его.</span><span class="sxs-lookup"><span data-stu-id="07e32-243">I don't see my result layout, although I created one.</span></span> | <span data-ttu-id="07e32-244">Это занимает несколько минут, так как эти параметры обычно кэшировали.</span><span class="sxs-lookup"><span data-stu-id="07e32-244">It takes a few minutes because these settings are generally cached.</span></span> <span data-ttu-id="07e32-245">Подождите несколько минут и попробуйте еще раз.</span><span class="sxs-lookup"><span data-stu-id="07e32-245">Wait for a few minutes and try again.</span></span>        |
| <span data-ttu-id="07e32-246">Я не вижу источников контента на странице вертикального или типа результатов.</span><span class="sxs-lookup"><span data-stu-id="07e32-246">I don't see any content sources on the vertical or result type page.</span></span> | <span data-ttu-id="07e32-247">Убедитесь, что вы настроили соединители и проиндексировали данные.</span><span class="sxs-lookup"><span data-stu-id="07e32-247">Make sure you have configured connectors and indexed data.</span></span>   |

## <a name="next-steps"></a><span data-ttu-id="07e32-248">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="07e32-248">Next steps</span></span>

[<span data-ttu-id="07e32-249">Настройка макета результатов</span><span class="sxs-lookup"><span data-stu-id="07e32-249">Customize the results layout</span></span>](customize-results-layout.md)
