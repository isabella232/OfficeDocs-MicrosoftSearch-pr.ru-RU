---
title: Управление вертикалями поиска
ms.author: jypal
author: jypal6
manager: jeffkizn
ms.audience: Admin
ms.topic: article
ms.service: mssearch
ms.localizationpriority: medium
search.appverid:
- BFB160
- MET150
- MOE150
description: Управление вертикалями поиска на странице результатов
ms.openlocfilehash: 0396c1f67b22a77a39f78aa1f058ee4b2019a39c
ms.sourcegitcommit: 02d4f91210d992da080fd39d5b60f8cf30d8f0b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/08/2021
ms.locfileid: "60238406"
---
# <a name="manage-search-verticals"></a>Управление вертикалями поиска

Вертикали поиска — это вкладки на странице результатов поиска, которые показывают результаты определенного типа или из выбранных источников. Например, вертикаль Файлов показывает результаты, классифицируются как файлы и упрощают поиск документов пользователями. Вы можете настроить вертикали в Поиск (Майкрософт) для удовлетворения потребностей вашей организации или отдельных отделов.

Вы можете управлять вертикалями на двух уровнях:

- **Уровень организации** — вертикаль на уровне организации отображается на [](https://sharepoint.com/) странице результатов поиска при поиске пользователей со своей [SharePoint,](https://office.com)Microsoft Office и Поиск (Майкрософт) в [Bing](https://bing.com)
- **Уровень сайта** — вертикаль на уровне сайта появляется на странице результатов поиска при поиске пользователей на SharePoint сайте. Например, может потребоваться включить сотрудников службы обслуживания клиентов для поиска инцидентов строгости 1 непосредственно с веб-сайта SharePoint отдела.

## <a name="understanding-search-verticals"></a>Понимание вертикали поиска

Поиск (Майкрософт) имеет два типа вертикали, из окна и настраиваемые вертикали. Вне поле вертикали, такие как All, Files и People, создают простой доступ к наиболее часто используемым результатам поиска.

Дополнительные параметры конфигурации предлагаются на настраиваемой вертикали и могут быть использованы для создания наилучшего опыта для пользователей.

Можно добавить вертикали поиска, которые имеют отношение к организации. Например, можно создать вертикаль для контента, связанного с маркетингом, а другое — для продаж, основываясь на типе информации, которая требуется каждому отделу. Вертикали можно добавить, чтобы показать результаты контента, [индексироваться](connectors-overview.md)Graph соединителями, но вы не можете создать вертикаль для контента, расположенного в SharePoint.

## <a name="create-search-verticals"></a>Создание вертикали поиска

Управление вертикальным управлением управляется мастером, вы руководствуется действиями, чтобы определить имя вертикали, источник контента и область поиска контента. Для определения области вертикального поиска заданного источника контента можно использовать ограниченный набор языка запросов ключевых слов [(KQL).](#keyword-query-language-kql)

Ниже следующую следующую меру по созданию настраиваемой вертикали на Поиск (Майкрософт) в [SharePoint](https://sharepoint.com/) [дома,](https://office.com/)Office или [Bing](https://bing.com/).  

### <a name="manage-organization-level-verticals"></a>Управление вертикалями на уровне организации

1. В [Центр администрирования Microsoft 365](https://admin.microsoft.com)перейдите на страницу [**Verticals**](https://admin.microsoft.com/Adminportal/Home#/MicrosoftSearch/verticals) в разделе **Настройка.**
1. Щелкните **добавить,** чтобы создать новую вертикаль.
1. После перемещения по шагам конфигурации можно просмотреть и сохранить вертикаль.  

### <a name="manage-site-level-verticals"></a>Управление вертикалями на уровне сайта

1. На SharePoint, где необходимо управлять вертикалями, откройте панель параметров, щелкнув передачу.
1. Выберите **сведения о сайте,** а затем выберите Просмотр **всех параметров сайта.**  
1. Ищите раздел Поиск (Майкрософт), а затем выберите **Параметры настройки поиска.**
1. В области навигации перейдите к настраиваемой области, а затем выберите **Вертикали.**
1. Щелкните **добавить,** чтобы создать новую вертикаль.
1. После настройки конфигурации можно просмотреть и сохранить вертикаль.  

## <a name="view-the-vertical-in-search-results"></a>Просмотр вертикали в результатах поиска

Макет [результатов поиска](manage-result-types.md) необходим для Graph для отображения результатов соединителя на вертикальной странице поиска. При обеспечении соответствующей компоновки результатов можно включить вертикаль поиска. После в включить вертикаль, есть задержка в несколько часов, прежде чем вы можете просмотреть его. Вы можете применить кэшClear=true к URL-адресу SharePoint и Office для немедленного просмотра вертикали. В Bing приложение &=uncachedVerticals в рабочий вертикальный URL-адрес для немедленного просмотра вертикали.

> [!NOTE]
> Добавленные вертикали не видны на [SharePoint](https://sharepoint.com/) и [Office](https://office.com) при просмотре в мобильных веб-браузерах.

## <a name="advanced-configuration-options"></a>Расширенные параметры конфигурации

### <a name="multiple-connections-in-a-vertical"></a>Несколько подключений в вертикали

Вертикаль поиска может поверхности результатов из нескольких источников соединителя. Этот параметр обеспечивает гибкость при разработке страницы результатов поиска. Процесс вертикальной установки позволяет администраторам выбирать несколько подключений в шаге "Источник контента".

Если вы точно назначим как можно больше семантических меток, этот опыт будет улучшен.  Вы добавляете семантические метки в точке определения схемы и их продекации. [Дополнительные возможности создания и управления семантическими метами.](configure-connector.md#step-6-assign-property-labels)
[Дополнительные](configure-connector.md#step-6-assign-property-labels) сведения о создании и управлении семантическими метами.

> [!NOTE]
> - Несколько подключений в вертикальной функции в настоящее время находятся в предварительном просмотре. Дополнительные сведения см. в [дополнительных сведениях о функции предварительного просмотра соединители.](connectors-overview.md#what-are-the-preview-features)
> - Подключение может быть добавлено в качестве источника контента в рамках единой вертикали. Подключения нельзя использовать по нескольким вертикалям.

Чтобы настроить запрос для вертикали поиска, в которой добавлено несколько источников подключения, используйте общие исходные свойства для создания запроса.

### <a name="keyword-query-language-kql"></a>Язык запросов по ключевым словам (KQL)

Запрос можно добавить в вертикаль, чтобы сузить результаты, показанные в вертикали поиска с помощью языка запросов ключевых слов [(KQL) (ограниченная](/sharepoint/dev/general-development/keyword-query-language-kql-syntax-reference) поддержка). На этой странице перечислены доступные свойства. Для создания KQL рекомендуется использовать ключевые слова и ограничения свойств с операторами boolean. Динамические операторы ранжирования, такие как XRANK, операторы близости и слова, не поддерживаются.

Вот несколько примеров запросов.

|Сценарий         | Query   |  
| --------- | ------ |
|Исключение результатов из сайтов архива           |NOT (путь:http//contoso.sharepoint.com/archive OR path:http//contoso.sharepoint.com/CompanyArchive)|
| Исключение результатов на основе свойства типа файла | NOT (FileType:htm)|  

#### <a name="profile-query-variables"></a>Переменные запроса профилей

Используйте переменные в разделе запроса KQL вертикали для предоставления динамических данных в качестве ввода запроса вертикальной. Вы можете использовать переменные запроса профилей, чтобы сделать результаты поиска контекстными для подписанного пользователя. Переменные запроса профилей извлекли значения из профиля подписанного [пользователя.](/graph/api/resources/profile)

Например, чтобы создать вертикаль "Билеты", чтобы пользователь нашел назначенные им билеты поддержки, можно указать следующий запрос в разделе "Запрос" во время создания вертикали на странице администрирования:  

`AssignedTo:{Profile.accounts.userPrincipalName}`

Этот язык сужает результаты поиска, чтобы показать только те элементы, для которых назначаемая является пользователем, который выполняет поиск.

[Ресурс Profile](/graph/api/resources/profile) предоставляет свойства в качестве коллекций. Например, сведения, относящиеся к адресам электронной почты, высвечив их через коллекцию электронной почты, позиции в качестве коллекции позиций и так далее. Все свойства, доступные в профиле пользователя, которые имеют AAD как исходный тип, выставляются в качестве переменных Запроса.

Рассмотрим пользователя, у которого в коллекции электронной почты есть три адреса электронной почты, как показано здесь:

```json
"emails": [{ 

        "address": "Megan.Bowen@contoso.com",
        "id": "xyz", 
        "source": { 
            "CreatedBy": "xyz", 
            "CreatedOn": "2222", 
            "Type": "official" 
        },
        "type": "main" 
    }, { 
        "address": "meganb@hotmail.com",
        "id": "abc", 
        "source": { 
            "CreatedBy": "abc",
            "CreatedOn": "3333", 
            "Type": "non-official",
        },
        "type": "work"
    }, { 
        "address": "meganb@outlook.com",
        "id": "pqr", 
        "source": { 
            "CreatedBy": "pqr", 
            "CreatedOn": "4444", 
            "Type": "personal" 
        },
        "type": "personal" 
    } 
] 
```

- Запрос будет `MyProperty: {Profile.emails.address}` *решаться в MyProperty: "Megan.Bowen@contoso.com".*  

- Чтобы устранить все значения атрибута адреса, используйте синтаксис расширения с несколькими значениями. Запрос будет разрешать `{|MyProperty:{Profile.emails.address}}` *(((MyProperty:"Megan.Bowen@contoso \. com")* или *(MyProperty: "meganb@hotmail \. com")* или *(MyProperty:"meganb@outlook \. com")).*

Использование оператора "|" для устранения переменных с несколькими значениями. Дополнительные примеры расширения профиля см. в следующей таблице.

| #         | Синтаксис |  Возвращено значение  |
| --------- | ------ | --- |
| 1    | MyProperty:{Profile.emails.address}  |   "Меган \. Bowen@contoso.com"  |
| 2 | MyProperty:{Profile.emails}   |    {Profile.emails} Это не решится, так как сообщения электронной *почты* — это объект.|
| 3     | {? MyProperty:{Profile.emails}}  |  Это не решится, *так как сообщения электронной почты* — это объект. The "?" оператор игнорирует переменные запроса, которые не решаются. Эта переменная будет удалена при дальнейшей стеке запросов.   |
| 4  | {&#124;MyProperty: {Profile.emails.source.Type}}    |  ((MyProperty:"official") или (MyProperty:"non-official") или (MyProperty:"personal"))    |

> [!NOTE]
>
> - Переменные запроса профилей поддерживаются только для настраиваемой вертикали, которые используют [соединитель](connectors-overview.md) в качестве источника контента.
> - В настоящее время функция переменных запросов профиля находится в предварительном режиме. Дополнительные сведения о предварительной версии см. в [дополнительных сведениях о функции предварительного просмотра соединители.](connectors-overview.md#what-are-the-preview-features)

## <a name="troubleshooting"></a>Устранение неполадок

Вот список распространенных проблем, с которыми вы можете столкнуться, и действий по их устранению.

|Проблема  |Действие  |
|---------|---------|
| Я вижу сообщение об ошибке "Что-то пошло не так" на вертикали. | Для завершения установки необходимы как вертикальные типы, так и типы результатов. Убедитесь, что оба этих источника настроены для источника контента. |
| Я не вижу источников контента на вертикальной странице. | Убедитесь, что вы настроили соединители и проиндексировали данные.   |
