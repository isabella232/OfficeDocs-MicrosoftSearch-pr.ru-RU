---
title: Соедините Graph ServiceNow для поиска в Microsoft Search
ms.author: mecampos
author: mecampos
manager: umas
audience: Admin
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединитетеля ServiceNow Graph microsoft Search
ms.openlocfilehash: 0b7e752ec67a7c14e4afc2e3bad32124694f8f39
ms.sourcegitcommit: 668930032e77a065c23551b3e8820dcc2c63c0f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2021
ms.locfileid: "52853817"
---
<!---Previous ms.author: kam1 --->


# <a name="servicenow-graph-connector"></a><span data-ttu-id="038cd-103">Соединители serviceNow Graph</span><span class="sxs-lookup"><span data-stu-id="038cd-103">ServiceNow Graph Connector</span></span>

<span data-ttu-id="038cd-104">С помощью Graph Microsoft для ServiceNow ваша организация может индексировать статьи на основе знаний, которые видны всем пользователям или ограничены разрешениями на использование критериев пользователей в организации.</span><span class="sxs-lookup"><span data-stu-id="038cd-104">With the Microsoft Graph Connector for ServiceNow, your organization can index knowledge-base articles that are visible to all users or restricted with user criteria permissions within your organization.</span></span> <span data-ttu-id="038cd-105">После настройки соединители и индексации контента из ServiceNow конечные пользователи могут искать эти статьи из любого клиента Microsoft Search.</span><span class="sxs-lookup"><span data-stu-id="038cd-105">After you configure the connector and index content from ServiceNow, end users can search for those articles from any Microsoft Search client.</span></span>  

<span data-ttu-id="038cd-106">В этой статье Microsoft 365 администраторы или все, кто настраивает, запускает и отслеживает соединители ServiceNow Graph.</span><span class="sxs-lookup"><span data-stu-id="038cd-106">This article is for Microsoft 365 administrators or anyone who configures, runs, and monitors a ServiceNow Graph  connector.</span></span> <span data-ttu-id="038cd-107">Он дополняет общие инструкции, предусмотренные в статье [Настройка Graph соединители.](configure-connector.md)</span><span class="sxs-lookup"><span data-stu-id="038cd-107">It supplements the general instructions provided in the [Set up your Graph connector](configure-connector.md) article.</span></span> <span data-ttu-id="038cd-108">Если вы еще этого не сделали, ознакомьтесь со всей статьей Настройка Graph Connector, чтобы понять общий процесс настройки.</span><span class="sxs-lookup"><span data-stu-id="038cd-108">If you have not already done so, read the entire Set up your Graph Connector article to understand the general setup process.</span></span>

<span data-ttu-id="038cd-109">Каждый шаг в процессе установки указан ниже вместе с примечанием, которое указывает на то, что следует выполнять общие инструкции установки или [](#troubleshooting) другие инструкции, применимые только к соединителу ServiceNow Graph, включая сведения о устранении неполадок и ограничениях. [](#limitations)</span><span class="sxs-lookup"><span data-stu-id="038cd-109">Each step in the setup process is listed below along with either a note that indicates you should follow the general setup instructions OR other instructions that apply to only ServiceNow Graph connector including information about [Troubleshooting](#troubleshooting) and [Limitations](#limitations).</span></span>  

## <a name="step-1-add-a-graph-connector-in-the-microsoft-365-admin-center"></a><span data-ttu-id="038cd-110">Шаг 1. Добавьте соединителю Graph в Microsoft 365 центре администрирования.</span><span class="sxs-lookup"><span data-stu-id="038cd-110">Step 1: Add a Graph connector in the Microsoft 365 admin center.</span></span>
<span data-ttu-id="038cd-111">Следуйте общим инструкциям установки.</span><span class="sxs-lookup"><span data-stu-id="038cd-111">Follow the general setup instructions.</span></span>

## <a name="step-2-name-the-connection"></a><span data-ttu-id="038cd-112">Шаг 2. Имя подключения.</span><span class="sxs-lookup"><span data-stu-id="038cd-112">Step 2: Name the connection.</span></span>
<span data-ttu-id="038cd-113">Следуйте общим инструкциям установки.</span><span class="sxs-lookup"><span data-stu-id="038cd-113">Follow the general setup instructions.</span></span>


## <a name="step-3-connection-settings"></a><span data-ttu-id="038cd-114">Шаг 3. Подключение Параметры</span><span class="sxs-lookup"><span data-stu-id="038cd-114">Step 3: Connection Settings</span></span>
<span data-ttu-id="038cd-115">Чтобы подключиться к данным ServiceNow, необходимо URL-адрес экземпляра **ServiceNow вашей организации.**</span><span class="sxs-lookup"><span data-stu-id="038cd-115">To connect to your ServiceNow data, you need your organization's **ServiceNow instance URL**.</span></span> <span data-ttu-id="038cd-116">URL-адрес экземпляра ServiceNow организации обычно https:// домена вашей организации **&lt;>.service-now.com.**</span><span class="sxs-lookup"><span data-stu-id="038cd-116">Your organization’s ServiceNow instance URL typically looks like **https://&lt;your-organization-domain>.service-now.com**.</span></span> 

<span data-ttu-id="038cd-117">Наряду с этим URL-адресом вам потребуется учетная запись службы для настройки подключения к ServiceNow, а также для того, чтобы разрешить Microsoft Search периодически обновлять статьи знаний в соответствии с расписанием обновления. </span><span class="sxs-lookup"><span data-stu-id="038cd-117">Along with this URL, you will need a **service account** for setting up the connection to ServiceNow as well as for allowing Microsoft Search to periodically update the knowledge articles based on the refresh schedule.</span></span> <span data-ttu-id="038cd-118">Учетной записи службы потребуется прочитать доступ к следующим записям **таблицы ServiceNow** для успешного обхода различных сущностями.</span><span class="sxs-lookup"><span data-stu-id="038cd-118">The service account will need read access to the following **ServiceNow table records** to successfully crawl various entities.</span></span>

<span data-ttu-id="038cd-119">**Функция**</span><span class="sxs-lookup"><span data-stu-id="038cd-119">**Feature**</span></span> | <span data-ttu-id="038cd-120">**Чтение таблиц, необходимых для доступа**</span><span class="sxs-lookup"><span data-stu-id="038cd-120">**Read access required tables**</span></span> | <span data-ttu-id="038cd-121">**Описание**</span><span class="sxs-lookup"><span data-stu-id="038cd-121">**Description**</span></span>
--- | --- | ---
<span data-ttu-id="038cd-122">Статьи об индексации знаний, доступные <em>каждому</em></span><span class="sxs-lookup"><span data-stu-id="038cd-122">Index knowledge articles available to <em>Everyone</em></span></span> | <span data-ttu-id="038cd-123">kb_knowledge</span><span class="sxs-lookup"><span data-stu-id="038cd-123">kb_knowledge</span></span> | <span data-ttu-id="038cd-124">Для обхода статей знаний</span><span class="sxs-lookup"><span data-stu-id="038cd-124">For crawling knowledge articles</span></span>
<span data-ttu-id="038cd-125">Индексация и поддержка разрешений на использование критериев пользователей</span><span class="sxs-lookup"><span data-stu-id="038cd-125">Index and support user criteria permissions</span></span> | <span data-ttu-id="038cd-126">kb_uc_can_read_mtom</span><span class="sxs-lookup"><span data-stu-id="038cd-126">kb_uc_can_read_mtom</span></span> | <span data-ttu-id="038cd-127">Кто может прочитать эту базу знаний</span><span class="sxs-lookup"><span data-stu-id="038cd-127">Who can read this knowledge base</span></span>
| | <span data-ttu-id="038cd-128">kb_uc_can_contribute_mtom</span><span class="sxs-lookup"><span data-stu-id="038cd-128">kb_uc_can_contribute_mtom</span></span> | <span data-ttu-id="038cd-129">Кто может внести свой вклад в эту базу знаний</span><span class="sxs-lookup"><span data-stu-id="038cd-129">Who can contribute to this knowledge base</span></span>
| | <span data-ttu-id="038cd-130">kb_uc_cannot_read_mtom</span><span class="sxs-lookup"><span data-stu-id="038cd-130">kb_uc_cannot_read_mtom</span></span> | <span data-ttu-id="038cd-131">Кто не может прочитать эту базу знаний</span><span class="sxs-lookup"><span data-stu-id="038cd-131">Who cannot read this knowledge base</span></span>
| | <span data-ttu-id="038cd-132">kb_uc_cannot_contribute_mtom</span><span class="sxs-lookup"><span data-stu-id="038cd-132">kb_uc_cannot_contribute_mtom</span></span> | <span data-ttu-id="038cd-133">Кто не может внести свой вклад в эту базу знаний</span><span class="sxs-lookup"><span data-stu-id="038cd-133">Who cannot contribute to this knowledge base</span></span>
| | <span data-ttu-id="038cd-134">sys_user</span><span class="sxs-lookup"><span data-stu-id="038cd-134">sys_user</span></span> | <span data-ttu-id="038cd-135">Чтение таблицы пользователей</span><span class="sxs-lookup"><span data-stu-id="038cd-135">Read user table</span></span>
| | <span data-ttu-id="038cd-136">sys_user_has_role</span><span class="sxs-lookup"><span data-stu-id="038cd-136">sys_user_has_role</span></span> | <span data-ttu-id="038cd-137">Чтение сведений о роли пользователей</span><span class="sxs-lookup"><span data-stu-id="038cd-137">Read role information of users</span></span>
| | <span data-ttu-id="038cd-138">sys_user_grmember</span><span class="sxs-lookup"><span data-stu-id="038cd-138">sys_user_grmember</span></span> | <span data-ttu-id="038cd-139">Чтение членства пользователей в группах</span><span class="sxs-lookup"><span data-stu-id="038cd-139">Read group membership of users</span></span>
| | <span data-ttu-id="038cd-140">user_criteria</span><span class="sxs-lookup"><span data-stu-id="038cd-140">user_criteria</span></span> | <span data-ttu-id="038cd-141">Read user criteria permissions</span><span class="sxs-lookup"><span data-stu-id="038cd-141">Read user criteria permissions</span></span>
| | <span data-ttu-id="038cd-142">kb_knowledge_base</span><span class="sxs-lookup"><span data-stu-id="038cd-142">kb_knowledge_base</span></span> | <span data-ttu-id="038cd-143">Чтение сведений о базе знаний</span><span class="sxs-lookup"><span data-stu-id="038cd-143">Read knowledge base information</span></span>

<span data-ttu-id="038cd-144">Вы можете **создать и назначить роль для** учетной записи службы, используемой для подключения к Microsoft Search.</span><span class="sxs-lookup"><span data-stu-id="038cd-144">You can **create and assign a role** for the service account you use to connect with Microsoft Search.</span></span> <span data-ttu-id="038cd-145">[Узнайте, как назначить роль для учетных записей ServiceNow.](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html)</span><span class="sxs-lookup"><span data-stu-id="038cd-145">[Learn how to assign role for ServiceNow accounts](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span></span> <span data-ttu-id="038cd-146">Чтение доступа к таблицам может быть назначено на созданную роль.</span><span class="sxs-lookup"><span data-stu-id="038cd-146">Read access to the tables can be assigned on the created role.</span></span> <span data-ttu-id="038cd-147">Подробнее об установке доступа к записям таблицы для чтения см. в материале [Securing Table Records.](https://developer.servicenow.com/dev.do#!/learn/learning-plans/orlando/new_to_servicenow/app_store_learnv2_securingapps_orlando_creating_and_editing_access_controls)</span><span class="sxs-lookup"><span data-stu-id="038cd-147">To learn about setting read access to table records, see [Securing Table Records](https://developer.servicenow.com/dev.do#!/learn/learning-plans/orlando/new_to_servicenow/app_store_learnv2_securingapps_orlando_creating_and_editing_access_controls).</span></span> 


>[!NOTE]
> <span data-ttu-id="038cd-148">ServiceNow Graph Connector может индексировать статьи знаний и разрешения на критерии пользователей без расширенных скриптов.</span><span class="sxs-lookup"><span data-stu-id="038cd-148">ServiceNow Graph Connector can index knowledge articles and user criteria permissions without advanced scripts.</span></span> <span data-ttu-id="038cd-149">Если критерии пользователя содержат расширенный скрипт, все связанные статьи знаний будут скрыты от результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="038cd-149">If a user criteria contains advanced script all the related knowledge articles will be hidden from search results.</span></span>

<span data-ttu-id="038cd-150">Чтобы проверить подлинность и синхронизировать контент из ServiceNow, выберите **один из трех** поддерживаемых методов:</span><span class="sxs-lookup"><span data-stu-id="038cd-150">To authenticate and sync content from ServiceNow, choose **one of three** supported methods:</span></span> 
 
1. <span data-ttu-id="038cd-151">Обычная проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="038cd-151">Basic authentication</span></span> 
1. <span data-ttu-id="038cd-152">ServiceNow OAuth (рекомендуется)</span><span class="sxs-lookup"><span data-stu-id="038cd-152">ServiceNow OAuth (recommended)</span></span>
1. <span data-ttu-id="038cd-153">Azure AD OpenID Подключение</span><span class="sxs-lookup"><span data-stu-id="038cd-153">Azure AD OpenID Connect</span></span>

### <a name="basic-authentication"></a><span data-ttu-id="038cd-154">Обычная проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="038cd-154">Basic authentication</span></span>

<span data-ttu-id="038cd-155">Введите имя пользователя и пароль учетной  записи ServiceNow с ролью знаний для проверки подлинности экземпляра.</span><span class="sxs-lookup"><span data-stu-id="038cd-155">Enter the username and password of ServiceNow account with **knowledge** role to authenticate to your instance.</span></span>

### <a name="servicenow-oauth"></a><span data-ttu-id="038cd-156">ServiceNow OAuth</span><span class="sxs-lookup"><span data-stu-id="038cd-156">ServiceNow OAuth</span></span>

<span data-ttu-id="038cd-157">Чтобы использовать ServiceNow OAuth для проверки подлинности, администратору ServiceNow необходимо в экземпляре ServiceNow задать конечную точку, чтобы приложение Microsoft Search стало получать к нему доступ.</span><span class="sxs-lookup"><span data-stu-id="038cd-157">To use ServiceNow OAuth for authentication, a ServiceNow admin needs to provision an endpoint in your ServiceNow instance, so that the Microsoft Search app can access it.</span></span> <span data-ttu-id="038cd-158">Дополнительные дополнительные возможности см. в [статью Создание конечной точки](https://docs.servicenow.com/bundle/newyork-platform-administration/page/administer/security/task/t_CreateEndpointforExternalClients.html) для доступа клиентов к экземпляру в документации ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="038cd-158">To learn more, see [Create an endpoint for clients to access the instance](https://docs.servicenow.com/bundle/newyork-platform-administration/page/administer/security/task/t_CreateEndpointforExternalClients.html) in the ServiceNow documentation.</span></span>

<span data-ttu-id="038cd-159">В следующей таблице приводится руководство по заполняемой форме создания конечной точки:</span><span class="sxs-lookup"><span data-stu-id="038cd-159">The following table provides guidance on how to fill out the endpoint creation form:</span></span>

<span data-ttu-id="038cd-160">Поле</span><span class="sxs-lookup"><span data-stu-id="038cd-160">Field</span></span> | <span data-ttu-id="038cd-161">Описание</span><span class="sxs-lookup"><span data-stu-id="038cd-161">Description</span></span> | <span data-ttu-id="038cd-162">Рекомендуемое значение</span><span class="sxs-lookup"><span data-stu-id="038cd-162">Recommended Value</span></span> 
--- | --- | ---
<span data-ttu-id="038cd-163">Имя</span><span class="sxs-lookup"><span data-stu-id="038cd-163">Name</span></span> | <span data-ttu-id="038cd-164">Уникальное значение, которое определяет приложение, для которое требуется доступ к OAuth.</span><span class="sxs-lookup"><span data-stu-id="038cd-164">Unique value that identifies the application that you require OAuth access for.</span></span> | <span data-ttu-id="038cd-165">Поиск (Майкрософт)</span><span class="sxs-lookup"><span data-stu-id="038cd-165">Microsoft Search</span></span>
<span data-ttu-id="038cd-166">Идентификатор клиента</span><span class="sxs-lookup"><span data-stu-id="038cd-166">Client ID</span></span> | <span data-ttu-id="038cd-167">Уникальный ID, созданный только для чтения, для приложения.</span><span class="sxs-lookup"><span data-stu-id="038cd-167">A read-only, auto generated unique ID for the application.</span></span> <span data-ttu-id="038cd-168">Экземпляр использует клиентский ID при запросе маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="038cd-168">The instance uses the client ID when it requests an access token.</span></span> | <span data-ttu-id="038cd-169">Н/Д</span><span class="sxs-lookup"><span data-stu-id="038cd-169">NA</span></span>
<span data-ttu-id="038cd-170">Секрет клиента</span><span class="sxs-lookup"><span data-stu-id="038cd-170">Client secret</span></span> | <span data-ttu-id="038cd-171">С помощью этой общей секретной строки экземпляр ServiceNow и Microsoft Search разрешают сообщения друг с другом.</span><span class="sxs-lookup"><span data-stu-id="038cd-171">With this shared secret string, the ServiceNow instance and Microsoft Search authorize communications with each other.</span></span> | <span data-ttu-id="038cd-172">Следуйте лучшим практикам безопасности, обращаясь с секретом как с паролем.</span><span class="sxs-lookup"><span data-stu-id="038cd-172">Follow security best-practices by treating the secret as a password.</span></span>
<span data-ttu-id="038cd-173">URL-адрес перенаправления</span><span class="sxs-lookup"><span data-stu-id="038cd-173">Redirect URL</span></span> | <span data-ttu-id="038cd-174">Необходимый URL-адрес вызова, на который перенаправляется сервер авторизации.</span><span class="sxs-lookup"><span data-stu-id="038cd-174">A required callback URL that the authorization server redirects to.</span></span> | https://gcs.office.com/v1.0/admin/oauth/callback
<span data-ttu-id="038cd-175">URL-адрес логотипа</span><span class="sxs-lookup"><span data-stu-id="038cd-175">Logo URL</span></span> | <span data-ttu-id="038cd-176">URL-адрес, содержащий изображение для логотипа приложения.</span><span class="sxs-lookup"><span data-stu-id="038cd-176">A URL that contains the image for the application logo.</span></span> | <span data-ttu-id="038cd-177">Н/Д</span><span class="sxs-lookup"><span data-stu-id="038cd-177">NA</span></span>
<span data-ttu-id="038cd-178">Активация</span><span class="sxs-lookup"><span data-stu-id="038cd-178">Active</span></span> | <span data-ttu-id="038cd-179">Выберите контрольный ящик, чтобы сделать реестр приложений активным.</span><span class="sxs-lookup"><span data-stu-id="038cd-179">Select the check box to make the application registry active.</span></span> | <span data-ttu-id="038cd-180">Настройка активного</span><span class="sxs-lookup"><span data-stu-id="038cd-180">Set to active</span></span>
<span data-ttu-id="038cd-181">Обновление срока службы маркера</span><span class="sxs-lookup"><span data-stu-id="038cd-181">Refresh token lifespan</span></span> | <span data-ttu-id="038cd-182">Количество секунд, которые допустимы для маркера обновления.</span><span class="sxs-lookup"><span data-stu-id="038cd-182">The number of seconds that a refresh token is valid.</span></span> <span data-ttu-id="038cd-183">По умолчанию срок действия маркеров обновления истекает через 100 дней (8 640 000 секунд).</span><span class="sxs-lookup"><span data-stu-id="038cd-183">By default, refresh tokens expire in 100 days (8,640,000 seconds).</span></span> | <span data-ttu-id="038cd-184">31 536 000 (1 год)</span><span class="sxs-lookup"><span data-stu-id="038cd-184">31,536,000 (1 year)</span></span>
<span data-ttu-id="038cd-185">Срок службы маркера доступа</span><span class="sxs-lookup"><span data-stu-id="038cd-185">Access token lifespan</span></span> | <span data-ttu-id="038cd-186">Количество секунд, которые допустимы для маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="038cd-186">The number of seconds that an access token is valid.</span></span> | <span data-ttu-id="038cd-187">43 200 (12 часов)</span><span class="sxs-lookup"><span data-stu-id="038cd-187">43,200 (12 hours)</span></span>

<span data-ttu-id="038cd-188">Введите id клиента и секрет клиента, чтобы подключиться к экземпляру.</span><span class="sxs-lookup"><span data-stu-id="038cd-188">Enter the client id and client secret to connect to your instance.</span></span> <span data-ttu-id="038cd-189">После подключения используйте учетные данные учетной записи ServiceNow для проверки подлинности разрешения для обхода.</span><span class="sxs-lookup"><span data-stu-id="038cd-189">After connecting, use a ServiceNow account credential to authenticate permission to crawl.</span></span> <span data-ttu-id="038cd-190">Учетная запись должна, по крайней мере, иметь **роль знаний.**</span><span class="sxs-lookup"><span data-stu-id="038cd-190">The account should at least have **knowledge** role.</span></span> <span data-ttu-id="038cd-191">Обратитесь к таблице в начале шага [3:](#step-3-connection-settings) параметры подключения для предоставления доступа к дополнительным записям таблицы ServiceNow и разрешениям на индексацию критериев пользователей.</span><span class="sxs-lookup"><span data-stu-id="038cd-191">Refer the table in the beginning of [step 3: connection settings](#step-3-connection-settings) for providing read access to more ServiceNow table records and index user criteria permissions.</span></span>

### <a name="azure-ad-openid-connect"></a><span data-ttu-id="038cd-192">Azure AD OpenID Подключение</span><span class="sxs-lookup"><span data-stu-id="038cd-192">Azure AD OpenID Connect</span></span>

<span data-ttu-id="038cd-193">Чтобы использовать службу OpenID Azure AD Подключение проверки подлинности, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="038cd-193">To use Azure AD OpenID Connect for authentication, follow the steps below.</span></span>

## <a name="step-3a-register-a-new-application-in-azure-active-directory"></a><span data-ttu-id="038cd-194">Шаг 3.a. Регистрация нового приложения в Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="038cd-194">Step 3.a: Register a new application in Azure Active Directory</span></span>

<span data-ttu-id="038cd-195">Подробнее о регистрации нового приложения в Azure Active Directory см. в [статью Регистрация приложения.](/azure/active-directory/develop/quickstart-register-app#register-an-application)</span><span class="sxs-lookup"><span data-stu-id="038cd-195">To learn about registering a new application in Azure Active Directory, see [Register an application](/azure/active-directory/develop/quickstart-register-app#register-an-application).</span></span> <span data-ttu-id="038cd-196">Выберите единый организационный каталог клиента.</span><span class="sxs-lookup"><span data-stu-id="038cd-196">Select single tenant organizational directory.</span></span> <span data-ttu-id="038cd-197">Перенаправление URI не требуется.</span><span class="sxs-lookup"><span data-stu-id="038cd-197">Redirect URI isn't needed.</span></span> <span data-ttu-id="038cd-198">После регистрации обратите внимание на ID приложения (клиента) и directory (tenant).</span><span class="sxs-lookup"><span data-stu-id="038cd-198">After registration, note down the Application (client) ID and Directory (tenant) ID.</span></span>

## <a name="step-3b-create-a-client-secret"></a><span data-ttu-id="038cd-199">Шаг 3.b. Создание секрета клиента</span><span class="sxs-lookup"><span data-stu-id="038cd-199">Step 3.b: Create a client secret</span></span>

<span data-ttu-id="038cd-200">Дополнительные информацию о создании клиентской тайны см. в [см. в "Создание секрета клиента".](/azure/active-directory/develop/quickstart-register-app#add-a-client-secret)</span><span class="sxs-lookup"><span data-stu-id="038cd-200">To learn about creating a client secret, see [Creating a client secret](/azure/active-directory/develop/quickstart-register-app#add-a-client-secret).</span></span> <span data-ttu-id="038cd-201">Обратите внимание на секрет клиента.</span><span class="sxs-lookup"><span data-stu-id="038cd-201">Take a note of client secret.</span></span>

## <a name="step-3c-retrieve-service-principal-object-identifier"></a><span data-ttu-id="038cd-202">Шаг 3.c. Извлечение идентификатора основного объекта службы</span><span class="sxs-lookup"><span data-stu-id="038cd-202">Step 3.c: Retrieve Service Principal Object Identifier</span></span>

<span data-ttu-id="038cd-203">Выполните действия по извлечению идентификатора основного объекта службы</span><span class="sxs-lookup"><span data-stu-id="038cd-203">Follow the steps to retrieve Service Principal Object Identifier</span></span>

1. <span data-ttu-id="038cd-204">Запустите PowerShell.</span><span class="sxs-lookup"><span data-stu-id="038cd-204">Run PowerShell.</span></span>

2. <span data-ttu-id="038cd-205">Установите Azure PowerShell с помощью следующей команды.</span><span class="sxs-lookup"><span data-stu-id="038cd-205">Install Azure PowerShell using the following command.</span></span>

   ```powershell
   Install-Module -Name Az -AllowClobber -Scope CurrentUser
   ```

3. <span data-ttu-id="038cd-206">Подключение Azure.</span><span class="sxs-lookup"><span data-stu-id="038cd-206">Connect to Azure.</span></span>

   ```powershell
   Connect-AzAccount
   ```

4. <span data-ttu-id="038cd-207">Получите идентификатор основного объекта службы.</span><span class="sxs-lookup"><span data-stu-id="038cd-207">Get Service Principal Object Identifier.</span></span>

   ```powershell
   Get-AzADServicePrincipal -ApplicationId "Application-ID"
   ```
   <span data-ttu-id="038cd-208">Замените "Application-ID" на ID приложения (клиента) (без кавычка) приложения, зарегистрированного на шаге 3.a.</span><span class="sxs-lookup"><span data-stu-id="038cd-208">Replace "Application-ID" with Application (client) ID (without quotes) of the application you registered in step 3.a.</span></span> <span data-ttu-id="038cd-209">Обратите внимание на значение ID-объекта из вывода PowerShell.</span><span class="sxs-lookup"><span data-stu-id="038cd-209">Note the value of ID object from PowerShell output.</span></span> <span data-ttu-id="038cd-210">Это главный ID службы.</span><span class="sxs-lookup"><span data-stu-id="038cd-210">It's the Service Principal ID.</span></span>

<span data-ttu-id="038cd-211">Теперь у вас есть все сведения, необходимые на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="038cd-211">Now you have all the information required from Azure portal.</span></span> <span data-ttu-id="038cd-212">Краткое описание сведений приведено в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="038cd-212">A quick summary of the information is given in the table below.</span></span>

<span data-ttu-id="038cd-213">Свойство</span><span class="sxs-lookup"><span data-stu-id="038cd-213">Property</span></span> | <span data-ttu-id="038cd-214">Описание</span><span class="sxs-lookup"><span data-stu-id="038cd-214">Description</span></span> 
--- | ---
<span data-ttu-id="038cd-215">Directory ID (Tenant ID)</span><span class="sxs-lookup"><span data-stu-id="038cd-215">Directory ID (Tenant ID)</span></span> | <span data-ttu-id="038cd-216">Уникальный ID клиента Azure Active Directory с шага 3.a.</span><span class="sxs-lookup"><span data-stu-id="038cd-216">Unique ID of the Azure Active Directory tenant, from step 3.a.</span></span>
<span data-ttu-id="038cd-217">ID приложения (Client ID)</span><span class="sxs-lookup"><span data-stu-id="038cd-217">Application ID (Client ID)</span></span> | <span data-ttu-id="038cd-218">Уникальный ID приложения, зарегистрированного в шаге 3.a.</span><span class="sxs-lookup"><span data-stu-id="038cd-218">Unique ID of the application registered in step 3.a.</span></span>
<span data-ttu-id="038cd-219">Секрет клиента</span><span class="sxs-lookup"><span data-stu-id="038cd-219">Client Secret</span></span> | <span data-ttu-id="038cd-220">Секретный ключ приложения (от шага 3.b).</span><span class="sxs-lookup"><span data-stu-id="038cd-220">The secret key of the application (from step 3.b).</span></span> <span data-ttu-id="038cd-221">Обращайся с ним как с паролем.</span><span class="sxs-lookup"><span data-stu-id="038cd-221">Treat it like a password.</span></span>
<span data-ttu-id="038cd-222">ID директора службы</span><span class="sxs-lookup"><span data-stu-id="038cd-222">Service Principal ID</span></span> | <span data-ttu-id="038cd-223">Удостоверение для приложения, запущенного в качестве службы.</span><span class="sxs-lookup"><span data-stu-id="038cd-223">An identity for the application running as a service.</span></span> <span data-ttu-id="038cd-224">(с шага 3.c)</span><span class="sxs-lookup"><span data-stu-id="038cd-224">(from step 3.c)</span></span>

## <a name="step-3d-register-servicenow-application"></a><span data-ttu-id="038cd-225">Шаг 3.d. Регистрация приложения ServiceNow</span><span class="sxs-lookup"><span data-stu-id="038cd-225">Step 3.d: Register ServiceNow Application</span></span>

<span data-ttu-id="038cd-226">Экземпляр ServiceNow нуждается в следующей конфигурации:</span><span class="sxs-lookup"><span data-stu-id="038cd-226">The ServiceNow instance needs the following configuration:</span></span>

1. <span data-ttu-id="038cd-227">Регистрация нового объекта OAuth OIDC.</span><span class="sxs-lookup"><span data-stu-id="038cd-227">Register a new OAuth OIDC entity.</span></span> <span data-ttu-id="038cd-228">Дополнительные возможности см. [в статью Создание поставщика OAuth OIDC.](https://docs.servicenow.com/bundle/orlando-platform-administration/page/administer/security/task/add-OIDC-entity.html)</span><span class="sxs-lookup"><span data-stu-id="038cd-228">To learn, see [Create an OAuth OIDC provider](https://docs.servicenow.com/bundle/orlando-platform-administration/page/administer/security/task/add-OIDC-entity.html).</span></span>

2. <span data-ttu-id="038cd-229">В следующей таблице указаны инструкции по заполняемой форме регистрации поставщика OIDC</span><span class="sxs-lookup"><span data-stu-id="038cd-229">The following table provides guidance on how to fill out OIDC provider registration form</span></span>

   <span data-ttu-id="038cd-230">Поле</span><span class="sxs-lookup"><span data-stu-id="038cd-230">Field</span></span> | <span data-ttu-id="038cd-231">Описание</span><span class="sxs-lookup"><span data-stu-id="038cd-231">Description</span></span> | <span data-ttu-id="038cd-232">Рекомендуемое значение</span><span class="sxs-lookup"><span data-stu-id="038cd-232">Recommended Value</span></span>
   --- | --- | ---
   <span data-ttu-id="038cd-233">Имя</span><span class="sxs-lookup"><span data-stu-id="038cd-233">Name</span></span> | <span data-ttu-id="038cd-234">Уникальное имя, идентифицирует сущность OAuth OIDC.</span><span class="sxs-lookup"><span data-stu-id="038cd-234">A unique name that identifies the OAuth OIDC entity.</span></span> | <span data-ttu-id="038cd-235">Azure AD</span><span class="sxs-lookup"><span data-stu-id="038cd-235">Azure AD</span></span>
   <span data-ttu-id="038cd-236">Идентификатор клиента</span><span class="sxs-lookup"><span data-stu-id="038cd-236">Client ID</span></span> | <span data-ttu-id="038cd-237">ID клиента приложения, зарегистрированного на стороннем сервере OAuth OIDC.</span><span class="sxs-lookup"><span data-stu-id="038cd-237">The client ID of the application registered in the third-party OAuth OIDC server.</span></span> <span data-ttu-id="038cd-238">Экземпляр использует клиентский ID при запросе маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="038cd-238">The instance uses the client ID when requesting an access token.</span></span> | <span data-ttu-id="038cd-239">ID приложения (клиента) с шага 3.a</span><span class="sxs-lookup"><span data-stu-id="038cd-239">Application (Client) ID from step 3.a</span></span>
   <span data-ttu-id="038cd-240">Секрет клиента</span><span class="sxs-lookup"><span data-stu-id="038cd-240">Client Secret</span></span> | <span data-ttu-id="038cd-241">Секрет клиента приложения, зарегистрированного на стороннем сервере OAuth OIDC.</span><span class="sxs-lookup"><span data-stu-id="038cd-241">The client secret of the application registered in the third-party OAuth OIDC server.</span></span> | <span data-ttu-id="038cd-242">Секрет клиента с шага 3.b</span><span class="sxs-lookup"><span data-stu-id="038cd-242">Client Secret from step 3.b</span></span>

   <span data-ttu-id="038cd-243">Все остальные значения могут быть по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="038cd-243">All other values can be default.</span></span>

3. <span data-ttu-id="038cd-244">В форме регистрации поставщика OIDC необходимо добавить новую конфигурацию поставщика OIDC.</span><span class="sxs-lookup"><span data-stu-id="038cd-244">In the OIDC provider registration form, you need to add a new OIDC provider configuration.</span></span> <span data-ttu-id="038cd-245">Выберите значок поиска в поле *конфигурации поставщика OAuth OIDC,* чтобы открыть записи конфигураций OIDC.</span><span class="sxs-lookup"><span data-stu-id="038cd-245">Select the search icon against *OAuth OIDC Provider Configuration* field to open the records of OIDC configurations.</span></span> <span data-ttu-id="038cd-246">Выберите New.</span><span class="sxs-lookup"><span data-stu-id="038cd-246">Select New.</span></span>

4. <span data-ttu-id="038cd-247">В следующей таблице приводится руководство по заполняемой форме конфигурации поставщика OIDC</span><span class="sxs-lookup"><span data-stu-id="038cd-247">The following table provides guidance on how to fill out OIDC provider configuration form</span></span>

   <span data-ttu-id="038cd-248">Поле</span><span class="sxs-lookup"><span data-stu-id="038cd-248">Field</span></span> | <span data-ttu-id="038cd-249">Рекомендуемое значение</span><span class="sxs-lookup"><span data-stu-id="038cd-249">Recommended Value</span></span>
   --- | ---
   <span data-ttu-id="038cd-250">Поставщик OIDC</span><span class="sxs-lookup"><span data-stu-id="038cd-250">OIDC Provider</span></span> |  <span data-ttu-id="038cd-251">Azure AD</span><span class="sxs-lookup"><span data-stu-id="038cd-251">Azure AD</span></span>
   <span data-ttu-id="038cd-252">URL-адрес метаданных OIDC</span><span class="sxs-lookup"><span data-stu-id="038cd-252">OIDC Metadata URL</span></span> | <span data-ttu-id="038cd-253">URL-адрес должен быть в форме \: https//login.microsoftonline.com/<tenandId">/.well-known/openid-configuration</span><span class="sxs-lookup"><span data-stu-id="038cd-253">The URL must be in the form https\://login.microsoftonline.com/<tenandId">/.well-known/openid-configuration</span></span> <br/><span data-ttu-id="038cd-254">Замените "tenantID" на directory (tenant) ID с шага 3.a.</span><span class="sxs-lookup"><span data-stu-id="038cd-254">Replace "tenantID" with Directory (tenant) ID from step 3.a.</span></span>
   <span data-ttu-id="038cd-255">Срок службы кэша конфигурации OIDC</span><span class="sxs-lookup"><span data-stu-id="038cd-255">OIDC Configuration Cache Life Span</span></span> |  <span data-ttu-id="038cd-256">120</span><span class="sxs-lookup"><span data-stu-id="038cd-256">120</span></span>
   <span data-ttu-id="038cd-257">Для приложений</span><span class="sxs-lookup"><span data-stu-id="038cd-257">Application</span></span> | <span data-ttu-id="038cd-258">Глобальная</span><span class="sxs-lookup"><span data-stu-id="038cd-258">Global</span></span>
   <span data-ttu-id="038cd-259">Утверждение пользователя</span><span class="sxs-lookup"><span data-stu-id="038cd-259">User Claim</span></span> | <span data-ttu-id="038cd-260">sub</span><span class="sxs-lookup"><span data-stu-id="038cd-260">sub</span></span>
   <span data-ttu-id="038cd-261">Пользовательское поле</span><span class="sxs-lookup"><span data-stu-id="038cd-261">User Field</span></span> | <span data-ttu-id="038cd-262">Идентификатор пользователя</span><span class="sxs-lookup"><span data-stu-id="038cd-262">User ID</span></span>
   <span data-ttu-id="038cd-263">Включить проверку утверждений JTI</span><span class="sxs-lookup"><span data-stu-id="038cd-263">Enable JTI claim verification</span></span> | <span data-ttu-id="038cd-264">Отключено</span><span class="sxs-lookup"><span data-stu-id="038cd-264">Disabled</span></span>

5. <span data-ttu-id="038cd-265">Выберите отправку и обновление формы OAuth OIDC Entity.</span><span class="sxs-lookup"><span data-stu-id="038cd-265">Select Submit and Update the OAuth OIDC Entity form.</span></span>

## <a name="step-3e-create-a-servicenow-account"></a><span data-ttu-id="038cd-266">Шаг 3.e. Создание учетной записи ServiceNow</span><span class="sxs-lookup"><span data-stu-id="038cd-266">Step 3.e: Create a ServiceNow account</span></span>

<span data-ttu-id="038cd-267">Обратитесь к инструкциям по созданию учетной записи ServiceNow, [созданию пользователя в ServiceNow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_CreateAUser.html).</span><span class="sxs-lookup"><span data-stu-id="038cd-267">Refer the instructions to create a ServiceNow account, [create a user in ServiceNow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_CreateAUser.html).</span></span>

<span data-ttu-id="038cd-268">В следующей таблице указаны инструкции по заполняемой регистрации учетной записи пользователя ServiceNow</span><span class="sxs-lookup"><span data-stu-id="038cd-268">The following table provides guidance on how to fill out the ServiceNow user account registration</span></span>

<span data-ttu-id="038cd-269">Поле</span><span class="sxs-lookup"><span data-stu-id="038cd-269">Field</span></span> | <span data-ttu-id="038cd-270">Рекомендуемое значение</span><span class="sxs-lookup"><span data-stu-id="038cd-270">Recommended Value</span></span>
--- | ---
<span data-ttu-id="038cd-271">Идентификатор пользователя</span><span class="sxs-lookup"><span data-stu-id="038cd-271">User ID</span></span> | <span data-ttu-id="038cd-272">ID директора службы с шага 3.c</span><span class="sxs-lookup"><span data-stu-id="038cd-272">Service Principal ID from step 3.c</span></span>
<span data-ttu-id="038cd-273">Доступ только к веб-службам</span><span class="sxs-lookup"><span data-stu-id="038cd-273">Web service access only</span></span> | <span data-ttu-id="038cd-274">Checked</span><span class="sxs-lookup"><span data-stu-id="038cd-274">Checked</span></span>

<span data-ttu-id="038cd-275">Все остальные значения можно оставить по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="038cd-275">All other values can be left to default.</span></span>

##### <a name="step-36-enable-knowledge-role-for-the-servicenow-account"></a><span data-ttu-id="038cd-276">Шаг 3.6. Включить роль знания для учетной записи ServiceNow</span><span class="sxs-lookup"><span data-stu-id="038cd-276">Step 3.6: Enable Knowledge role for the ServiceNow account</span></span>

<span data-ttu-id="038cd-277">Доступ к учетной записи ServiceNow, созданной с главным ИД ServiceNow в качестве пользовательского ИД, и назначьте роль знаний.</span><span class="sxs-lookup"><span data-stu-id="038cd-277">Access the ServiceNow account you created with ServiceNow Principal ID as User ID and assign the knowledge role.</span></span> <span data-ttu-id="038cd-278">Инструкции по назначению роли учетной записи ServiceNow можно найти здесь, назначив роль [пользователю.](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html)</span><span class="sxs-lookup"><span data-stu-id="038cd-278">Instructions to assigning a role to a ServiceNow account can be found here, [assign a role to a user](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span></span> <span data-ttu-id="038cd-279">Обратитесь к таблице в начале шага [3:](#step-3-connection-settings) параметры подключения для предоставления доступа к дополнительным записям таблицы ServiceNow и разрешениям на индексацию критериев пользователей.</span><span class="sxs-lookup"><span data-stu-id="038cd-279">Refer the table in the beginning of [step 3: connection settings](#step-3-connection-settings) for providing read access to more ServiceNow table records and index user criteria permissions.</span></span>

<span data-ttu-id="038cd-280">Используйте ID приложения в качестве client ID (с шага 3.a) и client secret (с шага 3.b) в мастере конфигурации центра администрирования для проверки подлинности экземпляра ServiceNow с помощью azure AD OpenID Подключение.</span><span class="sxs-lookup"><span data-stu-id="038cd-280">Use Application ID as Client ID (from step 3.a), and Client secret (from step 3.b) in admin center configuration wizard to authenticate to your ServiceNow instance using Azure AD OpenID Connect.</span></span>

## <a name="step-4-select-properties-and-filter-data"></a><span data-ttu-id="038cd-281">Шаг 4. Выбор свойств и фильтрация данных</span><span class="sxs-lookup"><span data-stu-id="038cd-281">Step 4: Select properties and filter data</span></span>

<span data-ttu-id="038cd-282">На этом шаге можно добавить или удалить доступные свойства из источника данных ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="038cd-282">In this step, you can add or remove available properties from your ServiceNow data source.</span></span> <span data-ttu-id="038cd-283">Microsoft 365 уже выбрано несколько свойств по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="038cd-283">Microsoft 365 has already selected few properties by default.</span></span>

<span data-ttu-id="038cd-284">Со строкой запроса ServiceNow можно указать условия синхронизации статей.</span><span class="sxs-lookup"><span data-stu-id="038cd-284">With a ServiceNow query string, you can specify conditions for syncing articles.</span></span> <span data-ttu-id="038cd-285">Это как клаузула **Where** в **заявлении SQL Select.**</span><span class="sxs-lookup"><span data-stu-id="038cd-285">It's like a **Where** clause in a **SQL Select** statement.</span></span> <span data-ttu-id="038cd-286">Например, можно индексировать только опубликованные и активные статьи.</span><span class="sxs-lookup"><span data-stu-id="038cd-286">For example, you can choose to index only articles that are published and active.</span></span> <span data-ttu-id="038cd-287">Чтобы узнать о создании собственной строки запроса, см. в статью Создание строки закодированного запроса [с помощью фильтра.](https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/using-lists/task/t_GenEncodQueryStringFilter.html)</span><span class="sxs-lookup"><span data-stu-id="038cd-287">To learn about creating your own query string, see [Generate an encoded query string using a filter](https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/using-lists/task/t_GenEncodQueryStringFilter.html).</span></span>

<span data-ttu-id="038cd-288">Чтобы проверить пример значений выбранных свойств и фильтра запросов, используйте кнопку "Результаты предварительного просмотра".</span><span class="sxs-lookup"><span data-stu-id="038cd-288">Use the preview results button to verify the sample values of the selected properties and query filter.</span></span>

## <a name="step-5-manage-search-permissions"></a><span data-ttu-id="038cd-289">Шаг 5. Управление разрешениями на поиск</span><span class="sxs-lookup"><span data-stu-id="038cd-289">Step 5: Manage search permissions</span></span>

<span data-ttu-id="038cd-290">Соединители ServiceNow поддерживают разрешения на  поиск, видимые всем или только людям с доступом **к этому источнику данных.**</span><span class="sxs-lookup"><span data-stu-id="038cd-290">The ServiceNow connector supports search permissions visible to **Everyone** or **Only people with access to this data source**.</span></span> <span data-ttu-id="038cd-291">Индексные данные появляются в результатах поиска и видны всем пользователям организации или пользователям, которые имеют к ним доступ с помощью разрешения на использование критериев пользователя соответственно.</span><span class="sxs-lookup"><span data-stu-id="038cd-291">Indexed data appears in the search results and is visible to all users in the organization or users who have access to them via user criteria permission respectively.</span></span> <span data-ttu-id="038cd-292">Если статья знаний не включена с пользовательскими критериями, она появится в результатах поиска всех в организации.</span><span class="sxs-lookup"><span data-stu-id="038cd-292">If a knowledge article is not enabled with a user criteria, it will appear in search results of everyone in the organization.</span></span>

<span data-ttu-id="038cd-293">ServiceNow Graph Connector поддерживает разрешения пользователей по умолчанию без расширенных скриптов.</span><span class="sxs-lookup"><span data-stu-id="038cd-293">ServiceNow Graph Connector supports default user criteria permissions without advanced scripts.</span></span> <span data-ttu-id="038cd-294">Когда соединитатель сталкивается с пользовательскими критериями с расширенным скриптом, все данные, использующие эти пользовательские критерии, не отображаются в результатах поиска.</span><span class="sxs-lookup"><span data-stu-id="038cd-294">When the connector encounters a user criteria with advanced script, all data using that user criteria will not appear in search results.</span></span>

>[!NOTE]
><span data-ttu-id="038cd-295">Чтобы выбрать **только людей с доступом к этому** источнику данных, впустите целевые обновления выпуска на клиента.</span><span class="sxs-lookup"><span data-stu-id="038cd-295">To choose **Only people with access to this data source**, enable targeted release updates on your tenant.</span></span> <span data-ttu-id="038cd-296">Подробнее о настройке целевого выпуска см. в выпуске [Setup Targeted release options.](/microsoft-365/admin/manage/release-options-in-office-365?preserve-view=true&view=o365-worldwide)</span><span class="sxs-lookup"><span data-stu-id="038cd-296">To learn about setting up targeted release, see [Setup Targeted release options.](/microsoft-365/admin/manage/release-options-in-office-365?preserve-view=true&view=o365-worldwide)</span></span>

<span data-ttu-id="038cd-297">Если вы **выбираете** только людей с доступом к этому источнику данных, вам необходимо дополнительно выбрать, имеет ли экземпляр ServiceNow Azure Active Directory (AAD) с предварительными пользователями или пользователями, не входив в AAD.</span><span class="sxs-lookup"><span data-stu-id="038cd-297">If you choose **Only people with access to this data source**, you need to further choose whether your ServiceNow instance has Azure Active Directory (AAD) provisioned users or Non-AAD users.</span></span>

>[!NOTE]
><span data-ttu-id="038cd-298">Если вы выбираете AAD в качестве типа источника удостоверений, убедитесь, что вы назначаете свойству источника UserPrincipalName (UPN) для адресной электронной почты в ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="038cd-298">If you choose AAD as the type of identity source, make sure you are assigning UserPrincipalName (UPN) source property to email targeted property in ServiceNow.</span></span> <span data-ttu-id="038cd-299">Чтобы проверить или изменить сопоставления, см. в приложении [SaaS параметры](/azure/active-directory/app-provisioning/customize-application-attributes)настройки атрибута подготовка пользователей в Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="038cd-299">To verify or change your mappings, see [Customizing user provisioning attribute-mappings for SaaS applications in Azure Active Directory](/azure/active-directory/app-provisioning/customize-application-attributes).</span></span>

<span data-ttu-id="038cd-300">Если вы выбрали "non-AAD" для типа удостоверений, см. введите Map [your non-Azure AD Identitys](map-non-aad.md) для инструкций по сопоставлению удостоверений.</span><span class="sxs-lookup"><span data-stu-id="038cd-300">If you have elected "non-AAD" for the identity type see [Map your non-Azure AD Identities](map-non-aad.md) for instructions on mapping the identities.</span></span> 

<span data-ttu-id="038cd-301">Вы также можете передать следующее видео, чтобы узнать больше об управлении разрешениями на поиск.</span><span class="sxs-lookup"><span data-stu-id="038cd-301">You can also refer the following video to learn more about managing search permissions.</span></span>

<span data-ttu-id="038cd-302">[![Управление разрешениями поиска в Microsoft Graph Connector для ServiceNow](https://img.youtube.com/vi/TVSkJpk1RiE/hqdefault.jpg)](https://www.youtube.com/watch?v=TVSkJpk1RiE)</span><span class="sxs-lookup"><span data-stu-id="038cd-302">[![Managing Search Permissions in Microsoft Graph Connector for ServiceNow](https://img.youtube.com/vi/TVSkJpk1RiE/hqdefault.jpg)](https://www.youtube.com/watch?v=TVSkJpk1RiE)</span></span>

## <a name="step-6-assign-property-labels"></a><span data-ttu-id="038cd-303">Шаг 6. Назначение меток свойств</span><span class="sxs-lookup"><span data-stu-id="038cd-303">Step 6: Assign property labels</span></span>

<span data-ttu-id="038cd-304">Следуйте общим инструкциям установки.</span><span class="sxs-lookup"><span data-stu-id="038cd-304">Follow the general setup instructions.</span></span>

## <a name="step-7-manage-schema"></a><span data-ttu-id="038cd-305">Шаг 7. Управление схемой</span><span class="sxs-lookup"><span data-stu-id="038cd-305">Step 7: Manage schema</span></span>

<span data-ttu-id="038cd-306">Следуйте общим инструкциям установки.</span><span class="sxs-lookup"><span data-stu-id="038cd-306">Follow the general setup instructions.</span></span>

## <a name="step-8-choose-refresh-settings"></a><span data-ttu-id="038cd-307">Шаг 8. Выбор параметров обновления</span><span class="sxs-lookup"><span data-stu-id="038cd-307">Step 8: Choose refresh settings</span></span>

<span data-ttu-id="038cd-308">Следуйте общим инструкциям установки.</span><span class="sxs-lookup"><span data-stu-id="038cd-308">Follow the general setup instructions.</span></span>

>[!NOTE]
><span data-ttu-id="038cd-309">Для удостоверений будет применен только запланированный полный обход.</span><span class="sxs-lookup"><span data-stu-id="038cd-309">For identities, only full crawl scheduled will be applied.</span></span>

## <a name="step-9-review-connection"></a><span data-ttu-id="038cd-310">Шаг 9. Просмотр подключения</span><span class="sxs-lookup"><span data-stu-id="038cd-310">Step 9: Review Connection</span></span>

<span data-ttu-id="038cd-311">Следуйте общим [инструкциям установки](./configure-connector.md).</span><span class="sxs-lookup"><span data-stu-id="038cd-311">Follow the general [setup instructions](./configure-connector.md).</span></span>

<span data-ttu-id="038cd-312">Соедините Graph ServiceNow имеет следующие ограничения в своем последнем выпуске:</span><span class="sxs-lookup"><span data-stu-id="038cd-312">ServiceNow Graph connector has the following limitations in its latest release:</span></span>

<span data-ttu-id="038cd-313">После публикации подключения необходимо настроить страницу результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="038cd-313">After publishing the connection, you need to customize the search results page.</span></span> <span data-ttu-id="038cd-314">Подробнее о настройке результатов поиска см. в странице [Настройка страницы результатов поиска.](/microsoftsearch/configure-connector#next-steps-customize-the-search-results-page)</span><span class="sxs-lookup"><span data-stu-id="038cd-314">To learn about customizing search results, see [Customize the search results page](/microsoftsearch/configure-connector#next-steps-customize-the-search-results-page).</span></span>

## <a name="limitations"></a><span data-ttu-id="038cd-315">Ограничения</span><span class="sxs-lookup"><span data-stu-id="038cd-315">Limitations</span></span>
<span data-ttu-id="038cd-316">Соедините Graph ServiceNow имеет следующие ограничения в своем последнем выпуске:</span><span class="sxs-lookup"><span data-stu-id="038cd-316">ServiceNow Graph connector has the following limitations in its latest release:</span></span>
- <span data-ttu-id="038cd-317">Индексация статей знаний, доступных всем в организации, является обычно доступной функцией.</span><span class="sxs-lookup"><span data-stu-id="038cd-317">Indexing knowledge articles available to everyone in an organization is a generally available feature.</span></span>
- <span data-ttu-id="038cd-318">*Только люди с доступом к* этой функции источника данных в шаге Управление разрешениями поиска находятся в целевом канале выпуска и обрабатывает только [разрешения на критерии](https://hi.service-now.com/kb_view.do?sysparm_article=KB0550924) пользователя.</span><span class="sxs-lookup"><span data-stu-id="038cd-318">*Only people with access to this data source* feature under Manage Search permissions step is in targeted release channel and processes only [user criteria](https://hi.service-now.com/kb_view.do?sysparm_article=KB0550924) permissions.</span></span> <span data-ttu-id="038cd-319">В результатах поиска не будут применяться разрешения на доступ другого типа.</span><span class="sxs-lookup"><span data-stu-id="038cd-319">Any other type of access permissions will not be applied in the search results.</span></span>
- <span data-ttu-id="038cd-320">Критерии пользователей с расширенными скриптами не поддерживаются в текущей версии.</span><span class="sxs-lookup"><span data-stu-id="038cd-320">User criteria with advanced scripts are not supported in the current version.</span></span> <span data-ttu-id="038cd-321">Любые статьи знаний с таким ограничением доступа будут индексироваться с отказом всем пользователям в доступе, то есть они не будут отображаться в результатах поиска любому пользователю до тех пор, пока мы их не поддерживаем.</span><span class="sxs-lookup"><span data-stu-id="038cd-321">Any knowledge articles with such an access restriction will be indexed with deny everyone access i.e. they will not appear in search results to any user until we support them.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="038cd-322">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="038cd-322">Troubleshooting</span></span>
<span data-ttu-id="038cd-323">После публикации подключения, настройки страницы результатов можно просмотреть состояние в вкладке **Источники** данных в центре [администрирования.](https://admin.microsoft.com)</span><span class="sxs-lookup"><span data-stu-id="038cd-323">After publishing your connection, customizing the results page, you can review the status under the **Data Sources** tab in the [admin center](https://admin.microsoft.com).</span></span> <span data-ttu-id="038cd-324">Подробнее о том, как делать обновления и удаления, см. в руб. [Управление соединитетелем.](manage-connector.md)</span><span class="sxs-lookup"><span data-stu-id="038cd-324">To learn how to make updates and deletions, see [Manage your connector](manage-connector.md).</span></span>
<span data-ttu-id="038cd-325">Вы можете найти действия по устранению неполадок для часто замеченных ниже проблем.</span><span class="sxs-lookup"><span data-stu-id="038cd-325">You can find troubleshooting steps for commonly seen issues below.</span></span>
### <a name="1-unable-to-login-due-to-single-sign-on-enabled-servicenow-instance"></a><span data-ttu-id="038cd-326">1. Невозможно войти из-за единого Sign-On экземпляра ServiceNow</span><span class="sxs-lookup"><span data-stu-id="038cd-326">1. Unable to login due to Single Sign-On enabled ServiceNow instance</span></span>

<span data-ttu-id="038cd-327">Если ваша организация включила Sign-On (SSO) в ServiceNow, у вас могут возникнуть проблемы с входом в учетную запись службы.</span><span class="sxs-lookup"><span data-stu-id="038cd-327">If your organization has enabled Single Sign-On (SSO) to ServiceNow, you may have trouble logging in with the service account.</span></span> <span data-ttu-id="038cd-328">Вы можете привести имя пользователя и пароль <em> `login.do` </em> на основе входа, добавив URL-адрес экземпляра ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="038cd-328">You can bring up username and password based login by adding <em> `login.do`</em> to the ServiceNow instance URL.</span></span> <span data-ttu-id="038cd-329">Эти URL-адреса должны поддерживать протокол HTTPS.</span><span class="sxs-lookup"><span data-stu-id="038cd-329">Example.</span></span> `https://<your-organization-domain>.service-now.com./login.do` 

### <a name="2-unauthorized-or-forbidden-response-to-api-request"></a><span data-ttu-id="038cd-330">2. Несанкционированный или запрещенный ответ на запрос API</span><span class="sxs-lookup"><span data-stu-id="038cd-330">2. Unauthorized or forbidden response to API request</span></span>

#### <a name="21-check-table-access-permissions"></a><span data-ttu-id="038cd-331">2.1.</span><span class="sxs-lookup"><span data-stu-id="038cd-331">2.1.</span></span> <span data-ttu-id="038cd-332">Проверка разрешений доступа к таблице</span><span class="sxs-lookup"><span data-stu-id="038cd-332">Check table access permissions</span></span>
<span data-ttu-id="038cd-333">Если вы видите запрещенный или несанкционированный ответ в состоянии подключения, проверьте, имеет ли учетная запись службы необходимый доступ к таблицам, указанным в шаге [3: параметры подключения.](#step-3-connection-settings)</span><span class="sxs-lookup"><span data-stu-id="038cd-333">If you see forbidden or unauthorized response in connection status, check if the service account has required access to the tables mentioned in [step 3: connection settings](#step-3-connection-settings).</span></span> <span data-ttu-id="038cd-334">Проверьте, есть ли доступ ко всем столбцам в таблицах для чтения.</span><span class="sxs-lookup"><span data-stu-id="038cd-334">Please check whether all the columns in the tables have read access.</span></span>

#### <a name="22-check-if-servicenow-instance-behind-firewall"></a><span data-ttu-id="038cd-335">2.2.</span><span class="sxs-lookup"><span data-stu-id="038cd-335">2.2.</span></span> <span data-ttu-id="038cd-336">Проверьте, есть ли экземпляр ServiceNow за брандмауэром</span><span class="sxs-lookup"><span data-stu-id="038cd-336">Check if ServiceNow instance behind firewall</span></span>
<span data-ttu-id="038cd-337">Graph Соединителу не удастся связаться с экземпляром ServiceNow, если он находится за сетевым брандмауэром.</span><span class="sxs-lookup"><span data-stu-id="038cd-337">Graph Connector may not be able to reach your ServiceNow instance if it is behind a network firewall.</span></span> <span data-ttu-id="038cd-338">Вам потребуется явно разрешить доступ к службе Graph Соединителю.</span><span class="sxs-lookup"><span data-stu-id="038cd-338">You will need explicitly allow access to Graph Connector service.</span></span> <span data-ttu-id="038cd-339">Диапазон общедоступных IP-адресов Graph Connector Service в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="038cd-339">You can find public IP address range of Graph Connector Service in the table below.</span></span> <span data-ttu-id="038cd-340">В зависимости от региона клиента добавьте его в белый список сетевых экземпляров ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="038cd-340">Based on your tenant region, add it to your ServiceNow instance network whitelist.</span></span>

<span data-ttu-id="038cd-341">**Среда**</span><span class="sxs-lookup"><span data-stu-id="038cd-341">**Environment**</span></span> | <span data-ttu-id="038cd-342">**Region**</span><span class="sxs-lookup"><span data-stu-id="038cd-342">**Region**</span></span> | <span data-ttu-id="038cd-343">**Range**</span><span class="sxs-lookup"><span data-stu-id="038cd-343">**Range**</span></span>
--- | --- | ---
<span data-ttu-id="038cd-344">PROD</span><span class="sxs-lookup"><span data-stu-id="038cd-344">PROD</span></span> | <span data-ttu-id="038cd-345">Северная Америка</span><span class="sxs-lookup"><span data-stu-id="038cd-345">North America</span></span> | <span data-ttu-id="038cd-346">52.250.92.252/30, 52.224.250.216/30</span><span class="sxs-lookup"><span data-stu-id="038cd-346">52.250.92.252/30, 52.224.250.216/30</span></span>
<span data-ttu-id="038cd-347">PROD</span><span class="sxs-lookup"><span data-stu-id="038cd-347">PROD</span></span> | <span data-ttu-id="038cd-348">Европа</span><span class="sxs-lookup"><span data-stu-id="038cd-348">Europe</span></span> | <span data-ttu-id="038cd-349">20.54.41.208/30, 51.105.159.88/30</span><span class="sxs-lookup"><span data-stu-id="038cd-349">20.54.41.208/30, 51.105.159.88/30</span></span> 
<span data-ttu-id="038cd-350">PROD</span><span class="sxs-lookup"><span data-stu-id="038cd-350">PROD</span></span> | <span data-ttu-id="038cd-351">Азиатско-Тихоокеанский регион</span><span class="sxs-lookup"><span data-stu-id="038cd-351">Asia Pacific</span></span> | <span data-ttu-id="038cd-352">52.139.188.212/30, 20.43.146.44/30</span><span class="sxs-lookup"><span data-stu-id="038cd-352">52.139.188.212/30, 20.43.146.44/30</span></span> 


<span data-ttu-id="038cd-353">Если у вас есть какие-либо другие проблемы или вы хотите предоставить обратную связь, пишите нам aka.ms/TalkToGraphConnectors</span><span class="sxs-lookup"><span data-stu-id="038cd-353">If you have any other issues or want to provide feedback, write to us aka.ms/TalkToGraphConnectors</span></span>
